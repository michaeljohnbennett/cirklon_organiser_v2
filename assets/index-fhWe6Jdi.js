var tl=Object.defineProperty;var nl=(e,t,n)=>t in e?tl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $t=(e,t,n)=>nl(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))l(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function ie(){}function Jn(e){return e()}function on(){return Object.create(null)}function ke(e){e.forEach(Jn)}function Wn(e){return typeof e=="function"}function xe(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function ll(e){return Object.keys(e).length===0}function Xn(e,...t){if(e==null){for(const l of t)l(void 0);return ie}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function ol(e){let t;return Xn(e,n=>t=n)(),t}function $e(e,t,n){e.$$.on_destroy.push(Xn(t,n))}function s(e,t){e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function R(e){e.parentNode&&e.parentNode.removeChild(e)}function Ke(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function u(e){return document.createElement(e)}function J(e){return document.createTextNode(e)}function b(){return J(" ")}function ht(){return J("")}function I(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function Zt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function i(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function sl(e){let t;return{p(...n){t=n,t.forEach(l=>e.push(l))},r(){t.forEach(n=>e.splice(e.indexOf(n),1))}}}function qt(e){return e===""?null:+e}function il(e){return Array.from(e.childNodes)}function be(e,t){t=""+t,e.data!==t&&(e.data=t)}function ne(e,t){e.value=t??""}function B(e,t,n,l){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,"")}function Be(e,t,n){for(let l=0;l<e.options.length;l+=1){const o=e.options[l];if(o.__value===t){o.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function St(e){const t=e.querySelector(":checked");return t&&t.__value}function ae(e,t,n){e.classList.toggle(t,!!n)}let Kt;function Ut(e){Kt=e}function Yn(){if(!Kt)throw new Error("Function called outside component initialization");return Kt}function rl(e){Yn().$$.on_mount.push(e)}function cl(e){Yn().$$.on_destroy.push(e)}function Qt(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(l=>l.call(this,t))}const Et=[],Jt=[];let jt=[];const sn=[],ul=Promise.resolve();let tn=!1;function al(){tn||(tn=!0,ul.then(Zn))}function at(e){jt.push(e)}const xt=new Set;let Lt=0;function Zn(){if(Lt!==0)return;const e=Kt;do{try{for(;Lt<Et.length;){const t=Et[Lt];Lt++,Ut(t),fl(t.$$)}}catch(t){throw Et.length=0,Lt=0,t}for(Ut(null),Et.length=0,Lt=0;Jt.length;)Jt.pop()();for(let t=0;t<jt.length;t+=1){const n=jt[t];xt.has(n)||(xt.add(n),n())}jt.length=0}while(Et.length);for(;sn.length;)sn.pop()();tn=!1,xt.clear(),Ut(e)}function fl(e){if(e.fragment!==null){e.update(),ke(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(at)}}function ml(e){const t=[],n=[];jt.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),jt=t}const Gt=new Set;let It;function Wt(){It={r:0,c:[],p:It}}function Xt(){It.r||ke(It.c),It=It.p}function Te(e,t){e&&e.i&&(Gt.delete(e),e.i(t))}function He(e,t,n,l){if(e&&e.o){if(Gt.has(e))return;Gt.add(e),It.c.push(()=>{Gt.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function fe(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function ft(e){e&&e.c()}function it(e,t,n){const{fragment:l,after_update:o}=e.$$;l&&l.m(t,n),at(()=>{const r=e.$$.on_mount.map(Jn).filter(Wn);e.$$.on_destroy?e.$$.on_destroy.push(...r):ke(r),e.$$.on_mount=[]}),o.forEach(at)}function rt(e,t){const n=e.$$;n.fragment!==null&&(ml(n.after_update),ke(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function dl(e,t){e.$$.dirty[0]===-1&&(Et.push(e),al(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ct(e,t,n,l,o,r,c=null,a=[-1]){const m=Kt;Ut(e);const f=e.$$={fragment:null,ctx:[],props:r,update:ie,not_equal:o,bound:on(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(m?m.$$.context:[])),callbacks:on(),dirty:a,skip_bound:!1,root:t.target||m.$$.root};c&&c(f.root);let d=!1;if(f.ctx=n?n(e,t.props||{},(_,p,...h)=>{const k=h.length?h[0]:p;return f.ctx&&o(f.ctx[_],f.ctx[_]=k)&&(!f.skip_bound&&f.bound[_]&&f.bound[_](k),d&&dl(e,_)),p}):[],f.update(),d=!0,ke(f.before_update),f.fragment=l?l(f.ctx):!1,t.target){if(t.hydrate){const _=il(t.target);f.fragment&&f.fragment.l(_),_.forEach(R)}else f.fragment&&f.fragment.c();t.intro&&Te(e.$$.fragment),it(e,t.target,t.anchor),Zn()}Ut(m)}class ut{constructor(){$t(this,"$$");$t(this,"$$set")}$destroy(){rt(this,1),this.$destroy=ie}$on(t,n){if(!Wn(n))return ie;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const o=l.indexOf(n);o!==-1&&l.splice(o,1)}}$set(t){this.$$set&&!ll(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const pl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(pl);const Nt=[];function ln(e,t=ie){let n;const l=new Set;function o(a){if(xe(e,a)&&(e=a,n)){const m=!Nt.length;for(const f of l)f[1](),Nt.push(f,e);if(m){for(let f=0;f<Nt.length;f+=2)Nt[f][0](Nt[f+1]);Nt.length=0}}}function r(a){o(a(e))}function c(a,m=ie){const f=[a,m];return l.add(f),l.size===1&&(n=t(o,r)||ie),a(e),()=>{l.delete(f),l.size===0&&n&&(n(),n=null)}}return{set:o,update:r,subscribe:c}}var Vt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qn={exports:{}};(function(e,t){(function(n,l){l()})(Vt,function(){function n(f,d){return typeof d>"u"?d={autoBom:!1}:typeof d!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),d={autoBom:!d}),d.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function l(f,d,_){var p=new XMLHttpRequest;p.open("GET",f),p.responseType="blob",p.onload=function(){m(p.response,d,_)},p.onerror=function(){console.error("could not download file")},p.send()}function o(f){var d=new XMLHttpRequest;d.open("HEAD",f,!1);try{d.send()}catch{}return 200<=d.status&&299>=d.status}function r(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var d=document.createEvent("MouseEvents");d.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(d)}}var c=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Vt=="object"&&Vt.global===Vt?Vt:void 0,a=c.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=c.saveAs||(typeof window!="object"||window!==c?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(f,d,_){var p=c.URL||c.webkitURL,h=document.createElement("a");d=d||f.name||"download",h.download=d,h.rel="noopener",typeof f=="string"?(h.href=f,h.origin===location.origin?r(h):o(h.href)?l(f,d,_):r(h,h.target="_blank")):(h.href=p.createObjectURL(f),setTimeout(function(){p.revokeObjectURL(h.href)},4e4),setTimeout(function(){r(h)},0))}:"msSaveOrOpenBlob"in navigator?function(f,d,_){if(d=d||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(n(f,_),d);else if(o(f))l(f,d,_);else{var p=document.createElement("a");p.href=f,p.target="_blank",setTimeout(function(){r(p)})}}:function(f,d,_,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof f=="string")return l(f,d,_);var h=f.type==="application/octet-stream",k=/constructor/i.test(c.HTMLElement)||c.safari,v=/CriOS\/[\d]+/.test(navigator.userAgent);if((v||h&&k||a)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var y=g.result;y=v?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=y:location=y,p=null},g.readAsDataURL(f)}else{var w=c.URL||c.webkitURL,D=w.createObjectURL(f);p?p.location=D:location.href=D,p=null,setTimeout(function(){w.revokeObjectURL(D)},4e4)}});c.saveAs=m.saveAs=m,e.exports=m})})(Qn);var $n=Qn.exports;const _l="[-A-Za-z0-9()#. $@!&+{}*]",en="Empty",yt="MIDI CC",Mt="Track CTRL",hl=["pgm","quant%","note%","noteC","velo%","veloC","leng%","tbase","xpos","octave","knob1","knob2","fts-R","fts-S","reich"],bl=["1","2","3","4","5","usb1","usb2","usb3","usb4","usb5"];function rn(){const e=new Date,t=String(e.getFullYear()).slice(-2),n=String(e.getMonth()+1).padStart(2,"0"),l=String(e.getDate()).padStart(2,"0"),o=String(Math.floor(Math.random()*100)).padStart(2,"0");return`${t}${n}${l}-${o} Cirklon Cfg`}function gl(){const{subscribe:e,set:t,update:n}=ln({name:rn(),instruments:[],selectedInstrument:null,importInstrumentData:null});return{subscribe:e,reset:()=>t({name:rn(),instruments:[],selectedInstrument:null,importInstrumentData:null}),setName:l=>n(o=>({...o,name:l||"Untitled Session"})),addInstrument:l=>n(o=>{let r=l.name;const c=o.instruments.map(f=>f.name);if(c.includes(r)){const f=r.match(/^(.+?)(\d+)$/);if(f){const d=f[1];let _=parseInt(f[2]);do _++,r=`${d}${_}`;while(c.includes(r))}else{let d=2;do r=`${l.name}${d}`,d++;while(c.includes(r))}}const a={...l,name:r},m=[...o.instruments,a];return{...o,instruments:m,selectedInstrument:a}}),deleteInstrument:l=>n(o=>{const r=o.instruments.filter(c=>c!==l);return{...o,instruments:r,selectedInstrument:r.length>0?r[0]:null}}),selectInstrument:l=>n(o=>({...o,selectedInstrument:l})),updateInstrument:l=>n(o=>{if(!o.selectedInstrument)return o;const r=o.instruments.findIndex(m=>m===o.selectedInstrument);if(r===-1)return o;const c={...o.selectedInstrument,...l},a=[...o.instruments];return a[r]=c,{...o,instruments:a,selectedInstrument:a[r]}}),replaceInstrument:l=>n(o=>{if(!o.selectedInstrument)return o;const r=o.instruments.findIndex(a=>a===o.selectedInstrument);if(r===-1)return o;const c=[...o.instruments];return c[r]=l,{...o,instruments:c,selectedInstrument:c[r]}}),setImportData:l=>n(o=>({...o,importInstrumentData:l})),clearImportData:()=>n(l=>({...l,importInstrumentData:null}))}}const x=gl(),Rt=ln(!1),Bt=ln(null);function cn(e){return new RegExp("^"+_l+"{0,20}$").test(e)}function un(e){return e>=1&&e<=16}function vl(e){let t,n,l=e[2].name+"",o,r,c;return{c(){t=u("button"),n=u("span"),o=J(l),i(n,"class","label label-rounded logo session-label svelte-10fjwyl"),B(t,"cursor","pointer"),B(t,"border","none"),B(t,"background","transparent"),B(t,"padding","0"),i(t,"title","Click to edit session name"),i(t,"type","button")},m(a,m){O(a,t,m),s(t,n),s(n,o),r||(c=[I(t,"click",e[3]),I(t,"keydown",e[7])],r=!0)},p(a,m){m&4&&l!==(l=a[2].name+"")&&be(o,l)},d(a){a&&R(t),r=!1,ke(c)}}}function kl(e){let t,n,l;return{c(){t=u("input"),i(t,"type","search"),i(t,"class","form-input input-sm"),B(t,"width","200px"),B(t,"display","inline-block")},m(o,r){O(o,t,r),ne(t,e[1]),n||(l=[I(t,"input",e[6]),I(t,"blur",e[4]),I(t,"keydown",e[5])],n=!0)},p(o,r){r&2&&t.value!==o[1]&&ne(t,o[1])},d(o){o&&R(t),n=!1,ke(l)}}}function Cl(e){let t,n,l,o,r,c,a,m,f,d;function _(k,v){return k[0]?kl:vl}let p=_(e),h=p(e);return{c(){t=u("header"),n=u("section"),l=u("div"),o=u("button"),r=J("Instruments"),a=b(),m=u("section"),h.c(),f=b(),d=u("section"),d.innerHTML='<a href="https://github.com/michaeljohnbennett/cirklon_organiser_v2" class="btn btn-sm">GitHub</a>',i(o,"class","btn btn-sm active badge"),i(o,"data-badge",c=e[2].instruments.length),i(l,"class","btn-group-block"),i(n,"class","navbar-section"),i(m,"class","navbar-center"),i(d,"class","navbar-section"),i(t,"class","navbar svelte-10fjwyl")},m(k,v){O(k,t,v),s(t,n),s(n,l),s(l,o),s(o,r),s(t,a),s(t,m),h.m(m,null),s(t,f),s(t,d)},p(k,[v]){v&4&&c!==(c=k[2].instruments.length)&&i(o,"data-badge",c),p===(p=_(k))&&h?h.p(k,v):(h.d(1),h=p(k),h&&(h.c(),h.m(m,null)))},i:ie,o:ie,d(k){k&&R(t),h.d()}}}function wl(e,t,n){let l;$e(e,x,_=>n(2,l=_));let o=!1,r="";function c(){n(1,r=l.name),n(0,o=!0)}function a(){r.trim()&&x.setName(r.trim()),n(0,o=!1)}function m(_){_.key==="Enter"?a():_.key==="Escape"&&n(0,o=!1)}function f(){r=this.value,n(1,r)}return[o,r,l,c,a,m,f,_=>_.key==="Enter"&&c()]}class Il extends ut{constructor(t){super(),ct(this,t,wl,Cl,xe,{})}}function nn(e=null,t=""){const n=(e==null?void 0:e.continuousControls)||[];let l=Array(6).fill(null).map(()=>_t());return e!=null&&e.trackControls&&Array.isArray(e.trackControls)&&(l=e.trackControls.map(o=>{const r=_t(o);if(r.ccNumber!==void 0&&n.length>0){const c=n.find(a=>a.cc===r.ccNumber);c&&(r.continuousControl=c)}return r})),{name:(e==null?void 0:e.name)||t||"New Instrument",midiPort:(e==null?void 0:e.midiPort)||(e==null?void 0:e.midi_port)||"1",midiChannel:(e==null?void 0:e.midiChannel)||(e==null?void 0:e.midi_chan)||1,default_note:(e==null?void 0:e.default_note)||"C 3",default_patt:(e==null?void 0:e.default_patt)||"P3",multi:(e==null?void 0:e.multi)==="true"||(e==null?void 0:e.multi)===!0||!1,presend_pgm:(e==null?void 0:e.presend_pgm)==="on"||(e==null?void 0:e.presend_pgm)===!0||!1,poly_spread:(e==null?void 0:e.poly_spread)==="on"||(e==null?void 0:e.poly_spread)===!0||!1,no_bankL:(e==null?void 0:e.no_bankL)||!1,no_bankM:(e==null?void 0:e.no_bankM)||!1,no_xpose:(e==null?void 0:e.no_xpose)||!1,no_fts:(e==null?void 0:e.no_fts)||!1,show_note_nums:(e==null?void 0:e.show_note_nums)||!1,no_thru:(e==null?void 0:e.no_thru)||!1,continuousControls:n,trackControls:l,rowDefinitions:(e==null?void 0:e.rowDefinitions)||[],settings:(e==null?void 0:e.settings)||yl(e,t)}}function yl(e=null,t=""){return{name:(e==null?void 0:e.name)||t||"New Instrument",midiPort:(e==null?void 0:e.midiPort)||(e==null?void 0:e.midi_port)||"1",midiChannel:(e==null?void 0:e.midiChannel)||(e==null?void 0:e.midi_channel)||1}}function pt(e=null,t=null){return{cc:t!==null?t:(e==null?void 0:e.cc)||0,name:(e==null?void 0:e.name)||(e==null?void 0:e.label)||"",min:(e==null?void 0:e.min)!==void 0?e.min:0,max:(e==null?void 0:e.max)!==void 0?e.max:127,start:(e==null?void 0:e.start)!==void 0?e.start:0}}function _t(e=null,t=null){const n={name:(e==null?void 0:e.name)||"",continuousControl:t||null,trackValue:"",option:"Empty"};return e&&(e.hasOwnProperty("MIDI_CC")?(n.option="MIDI CC",n.ccNumber=e.MIDI_CC):e.hasOwnProperty("track_control")&&e.track_control!==null?(n.option="Track CTRL",n.trackValue=e.track_control):n.option="Empty"),n}function xn(e=null,t="C 3"){return{name:t,label:(e==null?void 0:e.label)||t,show:(e==null?void 0:e.always_show)||!1}}function Ml(e){if(!e||e.instruments.length===0){alert("No instruments to export!");return}const t={instrument_data:{}};e.instruments.forEach(r=>{const c=el(r);t.instrument_data[r.name]=c});const n=JSON.stringify(t,null,"	"),l=new Blob([n],{type:"text/plain;charset=utf-8"}),o=(e.name||"session").replace(/[^a-z0-9_\-]/gi,"_").toLowerCase();$n.saveAs(l,`${o}.CKI`),setTimeout(()=>{alert(`Session saved as "${o}.CKI" with ${e.instruments.length} instrument(s)`)},100)}function el(e){const t={},n=t.CC_defs={};e.continuousControls.forEach(o=>{const r=`CC_${o.cc}`;n[r]={label:o.name,min_val:Number(o.min),max_val:Number(o.max),start_val:Number(o.min)}});const l=t.track_values={};if(e.trackControls.forEach((o,r)=>{const c=`slot_${r+1}`;o.option==="Track CTRL"?l[c]={track_control:o.trackValue}:o.option==="MIDI CC"&&o.continuousControl&&(l[c]={MIDI_CC:Number(o.continuousControl.cc),label:o.continuousControl.name})}),e.rowDefinitions&&e.rowDefinitions.length>0){const o=t.row_defs={};e.rowDefinitions.forEach(r=>{o[r.name]={label:r.label,always_show:r.show}})}return t.midi_port=e.midiPort,t.midi_chan=Number(e.midiChannel),t.default_note=e.default_note||"C 3",t.default_patt=e.default_patt||"P3",t.multi=e.multi?"true":"false",t.presend_pgm=e.presend_pgm?"on":"off",t.poly_spread=e.poly_spread?"on":"off",t.no_bankL=e.no_bankL||!1,t.no_bankM=e.no_bankM||!1,t.no_xpose=e.no_xpose||!1,t.no_fts=e.no_fts||!1,t.show_note_nums=e.show_note_nums||!1,t.no_thru=e.no_thru||!1,t}function Tl(e){const t=new FileReader;t.onload=n=>{try{const l=JSON.parse(n.target.result);if(l.hasOwnProperty("instrument_data")){const o=l.instrument_data,r=Object.keys(o);if(r.length===0){alert("No instruments found in file!");return}if(x.reset(),e&&typeof e.name=="string"&&e.name.length>0){const c=e.name.replace(/\.[^/.]+$/,"");x.setName(c||e.name)}r.forEach(c=>{const a=Yt(o[c],c);x.addInstrument(a)}),alert(`Loaded ${r.length} instrument(s)`)}else alert("Invalid Cirklon instrument file!")}catch(l){console.error("Error loading file:",l),alert("Error loading file: "+l.message)}},t.readAsText(e)}function Dl(e){const t=new FileReader;t.onload=n=>{try{const l=JSON.parse(n.target.result);if(l.hasOwnProperty("instrument_data")){const o=l.instrument_data,r=Object.keys(o);if(r.length===0){alert("No instruments found in file!");return}if(r.length>1){const c=r.map(a=>({name:a,data:o[a],selected:!0}));Bt.set({instruments:c,file:e}),Rt.set(!0)}else{const c=r[0],a={data:o[c],name:c};x.setImportData(a),Rt.set(!0)}}else alert("Invalid Cirklon instrument file!")}catch(l){console.error("Error loading file:",l),alert("Error loading file: "+l.message)}},t.readAsText(e)}function Yt(e,t){const n=nn(null,t);if(n.name=t,n.midiPort=String(e.midi_port||"1"),n.midiChannel=Number(e.midi_chan||1),n.default_note=e.default_note||"C 3",n.default_patt=e.default_patt||"P3",n.multi=e.multi==="true"||e.multi===!0,n.presend_pgm=e.presend_pgm==="on"||e.presend_pgm===!0,n.poly_spread=e.poly_spread==="on"||e.poly_spread===!0,n.no_bankL=e.no_bankL||!1,n.no_bankM=e.no_bankM||!1,n.no_xpose=e.no_xpose||!1,n.no_fts=e.no_fts||!1,n.show_note_nums=e.show_note_nums||!1,n.no_thru=e.no_thru||!1,console.log("Importing instrument:",t,"with midiPort:",n.midiPort,"and midiChannel:",n.midiChannel),e.CC_defs){const l=[];Object.keys(e.CC_defs).forEach(o=>{const r=e.CC_defs[o],c=parseInt(o.match(/\d+/g)[0]);l.push(pt(r,c))}),n.continuousControls=l}if(e.track_values){const l=[],o=e.track_values,r={};let c=0;Object.keys(o).forEach(f=>{const d=o[f],_=parseInt(f.match(/\d+/g)[0]);let p=null;d.MIDI_CC!==void 0&&(p=n.continuousControls.find(h=>h.cc===parseInt(d.MIDI_CC)),p||(p=pt({label:d.label},parseInt(d.MIDI_CC)),n.continuousControls.push(p))),r[_]=_t(d,p),c=Math.max(_,c)});const m=Math.ceil(c/6)*6;for(let f=1;f<=m;f++)l.push(r[f]||_t());n.trackControls=l}else n.trackControls=Array(6).fill(null).map(()=>_t());if(e.row_defs){const l=[];Object.keys(e.row_defs).forEach(o=>{l.push(xn(e.row_defs[o],o))}),n.rowDefinitions=l}return n}function Ll(e){e.forEach(t=>{if(t.selected){const n=Yt(t.data,t.name);x.addInstrument(n)}})}function Nl(e,t){if(!e||!e.data)return null;if(t==="new")return Yt(e.data,e.name);if(t==="merge"){const n=ol(x);if(!n.selectedInstrument)return alert("No instrument selected to merge with!"),null;const l=Yt(e.data,e.name),o=n.selectedInstrument;return l.name&&(o.name=l.name),l.midiPort&&(o.midiPort=l.midiPort),l.midiChannel&&(o.midiChannel=l.midiChannel),l.default_note&&(o.default_note=l.default_note),l.default_pattern&&(o.default_pattern=l.default_pattern),l.continuousControls.forEach(r=>{const c=o.continuousControls.findIndex(a=>a.cc===r.cc);c!==-1?o.continuousControls[c]=r:o.continuousControls.push(r)}),l.rowDefinitions&&l.rowDefinitions.forEach(r=>{const c=o.rowDefinitions.findIndex(a=>a.name===r.name);c!==-1?o.rowDefinitions[c]=r:o.rowDefinitions.push(r)}),o}return null}function an(e,t,n){const l=e.slice();return l[22]=t[n],l[24]=n,l}function fn(e,t,n){const l=e.slice();return l[25]=t[n],l}function mn(e){let t,n=e[3].selectedInstrument.name+"",l;return{c(){t=u("span"),l=J(n),i(t,"class","label label-rounded label-primary instrument-label svelte-eelyju")},m(o,r){O(o,t,r),s(t,l)},p(o,r){r&8&&n!==(n=o[3].selectedInstrument.name+"")&&be(l,n)},d(o){o&&R(t)}}}function dn(e){let t,n,l,o,r,c,a,m;function f(...d){return e[19](e[25],...d)}return{c(){t=u("li"),n=u("button"),l=u("div"),l.textContent=`${e[25].name}`,o=b(),r=u("div"),r.textContent=`${e[25].description}`,c=b(),i(l,"class","template-name svelte-eelyju"),i(r,"class","template-desc svelte-eelyju"),i(n,"type","button"),i(n,"class","template-button svelte-eelyju"),i(t,"class","menu-item")},m(d,_){O(d,t,_),s(t,n),s(n,l),s(n,o),s(n,r),s(t,c),a||(m=I(n,"click",f),a=!0)},p(d,_){e=d},d(d){d&&R(t),a=!1,m()}}}function pn(e){let t,n=e[22].name+"",l;return{c(){t=u("option"),l=J(n),t.__value=e[24],ne(t,t.__value)},m(o,r){O(o,t,r),s(t,l)},p(o,r){r&8&&n!==(n=o[22].name+"")&&be(l,n)},d(o){o&&R(t)}}}function El(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g,w,D,y,j,z,A,P,U,C,M,L,E,q,X,Z,T,K,te,V,Q,G,de,F,De,Ee,ge,oe,le,je,Ge,Xe,Ce=e[3].selectedInstrument&&mn(e),Re=fe(e[4]),ce=[];for(let H=0;H<Re.length;H+=1)ce[H]=dn(fn(e,Re,H));let Se=fe(e[3].instruments),pe=[];for(let H=0;H<Se.length;H+=1)pe[H]=pn(an(e,Se,H));return{c(){t=u("input"),n=b(),l=u("input"),o=b(),r=u("div"),c=u("div"),a=u("section"),m=u("div"),f=u("div"),d=u("button"),d.textContent="New Session",_=b(),p=u("button"),p.textContent="Open",h=b(),k=u("button"),k.textContent="Save",v=b(),g=u("div"),Ce&&Ce.c(),w=b(),D=u("section"),y=u("div"),j=u("div"),z=u("button"),z.innerHTML='<i class="icon icon-bookmark"></i>',A=b(),P=u("ul");for(let H=0;H<ce.length;H+=1)ce[H].c();U=b(),C=u("button"),C.innerHTML='<i class="icon icon-upload btn-sm"></i>',M=b(),L=u("button"),E=u("i"),X=b(),Z=u("button"),Z.innerHTML='<i class="icon icon-plus"></i>',T=b(),K=u("button"),te=u("i"),Q=b(),G=u("button"),de=u("i"),De=b(),Ee=u("section"),ge=u("div"),oe=u("select");for(let H=0;H<pe.length;H+=1)pe[H].c();i(t,"type","file"),i(t,"accept",".json,.CKI"),B(t,"display","none"),i(l,"type","file"),i(l,"accept",".CKI"),B(l,"display","none"),i(d,"class","btn"),i(p,"class","btn tooltip svelte-eelyju"),i(p,"data-tooltip","Open session"),i(k,"class","btn tooltip svelte-eelyju"),i(k,"data-tooltip","Save session"),i(f,"class","btn-group btn-group-block"),i(m,"class","column col-auto"),i(g,"class","column"),B(g,"text-align","center"),i(a,"class","navbar-section columns"),i(z,"class","btn tooltip dropdown-toggle svelte-eelyju"),i(z,"data-tooltip","Load instrument template"),i(z,"type","button"),i(P,"class","menu template-menu svelte-eelyju"),i(j,"class","dropdown"),ae(j,"active",e[2]),i(C,"class","btn tooltip svelte-eelyju"),i(C,"data-tooltip","Import instrument"),i(E,"class","icon icon-download btn-sm"),i(L,"class","btn tooltip svelte-eelyju"),i(L,"data-tooltip","Export selected instrument"),L.disabled=q=!e[3].selectedInstrument,i(Z,"class","btn tooltip svelte-eelyju"),i(Z,"data-tooltip","Add new instrument"),i(te,"class","icon icon-copy"),i(K,"class","btn tooltip svelte-eelyju"),i(K,"data-tooltip","Duplicate selected instrument"),K.disabled=V=!e[3].selectedInstrument,i(de,"class","icon icon-minus"),i(G,"class","btn tooltip svelte-eelyju"),i(G,"data-tooltip","Delete selected instrument"),G.disabled=F=!e[3].selectedInstrument,i(y,"class","btn-group btn-group-block"),i(D,"class","navbar-center"),i(oe,"class","form-select"),oe.disabled=je=e[3].instruments.length<=1,i(ge,"class","column"),i(Ee,"class","navbar-section"),i(c,"class","navbar"),i(r,"class","toolbar-container svelte-eelyju")},m(H,_e){O(H,t,_e),e[17](t),O(H,n,_e),O(H,l,_e),e[18](l),O(H,o,_e),O(H,r,_e),s(r,c),s(c,a),s(a,m),s(m,f),s(f,d),s(f,_),s(f,p),s(f,h),s(f,k),s(a,v),s(a,g),Ce&&Ce.m(g,null),s(c,w),s(c,D),s(D,y),s(y,j),s(j,z),s(j,A),s(j,P);for(let Y=0;Y<ce.length;Y+=1)ce[Y]&&ce[Y].m(P,null);s(y,U),s(y,C),s(y,M),s(y,L),s(L,E),s(y,X),s(y,Z),s(y,T),s(y,K),s(K,te),s(y,Q),s(y,G),s(G,de),s(c,De),s(c,Ee),s(Ee,ge),s(ge,oe);for(let Y=0;Y<pe.length;Y+=1)pe[Y]&&pe[Y].m(oe,null);Be(oe,e[3].instruments.indexOf(e[3].selectedInstrument)),Ge||(Xe=[I(t,"change",e[8]),I(l,"change",e[11]),I(d,"click",e[5]),I(p,"click",e[7]),I(k,"click",e[6]),I(z,"click",e[16]),I(C,"click",e[10]),I(L,"click",e[14]),I(Z,"click",e[9]),I(K,"click",e[13]),I(G,"click",e[12]),I(oe,"change",e[20])],Ge=!0)},p(H,[_e]){if(H[3].selectedInstrument?Ce?Ce.p(H,_e):(Ce=mn(H),Ce.c(),Ce.m(g,null)):Ce&&(Ce.d(1),Ce=null),_e&32784){Re=fe(H[4]);let Y;for(Y=0;Y<Re.length;Y+=1){const Le=fn(H,Re,Y);ce[Y]?ce[Y].p(Le,_e):(ce[Y]=dn(Le),ce[Y].c(),ce[Y].m(P,null))}for(;Y<ce.length;Y+=1)ce[Y].d(1);ce.length=Re.length}if(_e&4&&ae(j,"active",H[2]),_e&8&&q!==(q=!H[3].selectedInstrument)&&(L.disabled=q),_e&8&&V!==(V=!H[3].selectedInstrument)&&(K.disabled=V),_e&8&&F!==(F=!H[3].selectedInstrument)&&(G.disabled=F),_e&8){Se=fe(H[3].instruments);let Y;for(Y=0;Y<Se.length;Y+=1){const Le=an(H,Se,Y);pe[Y]?pe[Y].p(Le,_e):(pe[Y]=pn(Le),pe[Y].c(),pe[Y].m(oe,null))}for(;Y<pe.length;Y+=1)pe[Y].d(1);pe.length=Se.length}_e&8&&le!==(le=H[3].instruments.indexOf(H[3].selectedInstrument))&&Be(oe,H[3].instruments.indexOf(H[3].selectedInstrument)),_e&8&&je!==(je=H[3].instruments.length<=1)&&(oe.disabled=je)},i:ie,o:ie,d(H){H&&(R(t),R(n),R(l),R(o),R(r)),e[17](null),e[18](null),Ce&&Ce.d(),Ke(ce,H),Ke(pe,H),Ge=!1,ke(Xe)}}}function Sl(e,t,n){let l;$e(e,x,C=>n(3,l=C));let o,r;const c=[{file:"instrument-template.CKI",name:"Template - Full Setup",description:"Complete instrument with 38 CCs and track controls"}];let a=!1;function m(){confirm("Create new session? Unsaved changes will be lost.")&&x.reset()}function f(){Ml(l)}function d(){l.instruments.length>0&&!confirm("Load session? Unsaved changes will be lost.")||o.click()}function _(C){const M=C.target.files[0];M&&(Tl(M),C.target.value="")}function p(){const C=nn();x.addInstrument(C)}function h(){r.click()}function k(C){const M=C.target.files[0];M&&(Dl(M),C.target.value="")}function v(){l.selectedInstrument&&confirm('Delete instrument "'+l.selectedInstrument.name+'"?')&&x.deleteInstrument(l.selectedInstrument)}function g(){if(!l.selectedInstrument)return;const C=l.selectedInstrument,M=JSON.parse(JSON.stringify(C)),L=C.name.match(/^(.+?)(\d+)$/);if(L){const E=L[1],q=parseInt(L[2]);M.name=`${E}${q+1}`}else M.name=`${C.name}2`;x.addInstrument(M)}function w(){if(!l.selectedInstrument)return;const C=l.selectedInstrument,M={instrument_data:{}};M.instrument_data[C.name]=el(C);const L=JSON.stringify(M,null,"	"),E=new Blob([L],{type:"text/plain;charset=utf-8"}),q=C.name.replace(/[^a-z0-9_\-]/gi,"_").toLowerCase();$n.saveAs(E,`${q}.CKI`),setTimeout(()=>{alert(`Instrument "${C.name}" exported as "${q}.CKI"`)},100)}async function D(C){console.log("Loading template:",C);try{const M=`/cirklon_organiser_v2/templates/${C}`,L=await fetch(M);console.log("Response:",L);const E=await L.json();console.log("Template data:",E);const q=nn(E);console.log("New instrument:",q),x.addInstrument(q),console.log("Template loaded successfully")}catch(M){console.error("Failed to load instrument template:",M),alert("Failed to load template: "+M.message)}finally{n(2,a=!1)}}function y(C){C.stopPropagation(),console.log("Toggle dropdown, current state:",a),n(2,a=!a)}function j(C){a&&!C.target.closest(".dropdown")&&n(2,a=!1)}rl(()=>{window.addEventListener("click",j)}),cl(()=>{window.removeEventListener("click",j)});function z(C){Jt[C?"unshift":"push"](()=>{o=C,n(0,o)})}function A(C){Jt[C?"unshift":"push"](()=>{r=C,n(1,r)})}return[o,r,a,l,c,m,f,d,_,p,h,k,v,g,w,D,y,z,A,(C,M)=>{M.stopPropagation(),console.log("Template button clicked:",C.file),D(C.file)},C=>{const M=parseInt(C.target.value);x.selectInstrument(l.instruments[M])}]}class jl extends ut{constructor(t){super(),ct(this,t,Sl,El,xe,{})}}function _n(e,t,n){const l=e.slice();return l[36]=t[n],l}function hn(e,t,n){const l=e.slice();return l[39]=t[n],l}function Rl(e,t,n){const l=e.slice();return l[42]=t[n],l[44]=n,l}function Al(e,t,n){const l=e.slice();return l[45]=t[n],l}function bn(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g,w,D,y,j,z,A,P,U,C,M,L,E,q,X,Z,T,K,te,V,Q,G,de,F,De,Ee,ge,oe,le,je,Ge,Xe,Ce,Re,ce,Se,pe,H,_e,Y,Le,S,ee,se,we,ve,re,Ae,Ue,mt,At,bt,Ie,et,gt,Pe,Ot,Ze,Ye,tt,vt,Oe,zt,kt,Ne,nt,Qe,dt,Ht,Ct,ye,lt,wt,Fe,Pt,ot,Tt,Ft=fe(bl),Je=[];for(let N=0;N<Ft.length;N+=1)Je[N]=Ol(Al(e,Ft,N));let Dt=fe(Array(16)),We=[];for(let N=0;N<Dt.length;N+=1)We[N]=zl(Rl(e,Dt,N));let st=fe(e[1]),ze=[];for(let N=0;N<st.length;N+=1)ze[N]=gn(hn(e,st,N));let Me=fe(e[2]),ue=[];for(let N=0;N<Me.length;N+=1)ue[N]=vn(_n(e,Me,N));return{c(){t=u("form"),n=u("div"),l=u("div"),o=u("div"),o.innerHTML='<label class="form-label" for="instrument-name">Name</label>',r=b(),c=u("div"),a=u("input"),m=b(),f=u("div"),d=u("div"),d.innerHTML='<label class="form-label" for="instrument-midi-port">MIDI port</label>',_=b(),p=u("div"),h=u("select");for(let N=0;N<Je.length;N+=1)Je[N].c();k=b(),v=u("div"),g=u("div"),g.innerHTML='<label class="form-label" for="instrument-midi-channel">MIDI channel</label>',w=b(),D=u("div"),y=u("select");for(let N=0;N<We.length;N+=1)We[N].c();j=b(),z=u("div"),A=u("div"),A.innerHTML='<label class="form-label" for="instrument-default-note">Default Note</label>',P=b(),U=u("div"),C=u("select");for(let N=0;N<ze.length;N+=1)ze[N].c();M=b(),L=u("div"),E=u("div"),E.innerHTML='<label class="form-label" for="instrument-default-pattern">Default Pattern</label>',q=b(),X=u("div"),Z=u("select");for(let N=0;N<ue.length;N+=1)ue[N].c();T=b(),K=u("div"),te=b(),V=u("div"),Q=u("div"),G=u("div"),de=u("label"),F=u("input"),De=b(),Ee=u("i"),ge=J(" Multi"),oe=b(),le=u("label"),je=u("input"),Ge=b(),Xe=u("i"),Ce=J(" Presend pgm"),Re=b(),ce=u("label"),Se=u("input"),pe=b(),H=u("i"),_e=J(" Poly Spread"),Y=b(),Le=u("label"),S=u("input"),ee=b(),se=u("i"),we=J(" No Bank L"),ve=b(),re=u("label"),Ae=u("input"),Ue=b(),mt=u("i"),At=J(" No Bank M"),bt=b(),Ie=u("label"),et=u("input"),gt=b(),Pe=u("i"),Ot=J(" No XPose"),Ze=b(),Ye=u("label"),tt=u("input"),vt=b(),Oe=u("i"),zt=J(" No FTS"),kt=b(),Ne=u("label"),nt=u("input"),Qe=b(),dt=u("i"),Ht=J(" Show note nums"),Ct=b(),ye=u("label"),lt=u("input"),wt=b(),Fe=u("i"),Pt=J(" No Thru"),i(o,"class","col-3"),i(a,"id","instrument-name"),i(a,"class","form-input"),i(a,"type","search"),i(a,"placeholder","name"),i(a,"maxlength","9"),i(c,"class","col-9"),i(l,"class","form-group"),ae(l,"error",!cn(e[0].name)),i(d,"class","col-3"),i(h,"id","instrument-midi-port"),i(h,"class","form-select"),e[0].midiPort===void 0&&at(()=>e[8].call(h)),i(p,"class","col-9"),i(f,"class","form-group"),i(g,"class","col-3"),i(y,"id","instrument-midi-channel"),i(y,"class","form-select"),e[0].midiChannel===void 0&&at(()=>e[10].call(y)),i(D,"class","col-9"),i(v,"class","form-group"),ae(v,"error",!un(e[0].midiChannel)),i(A,"class","col-3"),i(C,"id","instrument-default-note"),i(C,"class","form-select"),e[0].default_note===void 0&&at(()=>e[12].call(C)),i(U,"class","col-9"),i(z,"class","form-group"),i(E,"class","col-3"),i(Z,"id","instrument-default-pattern"),i(Z,"class","form-select"),e[0].default_patt===void 0&&at(()=>e[14].call(Z)),i(X,"class","col-9"),i(L,"class","form-group"),i(n,"class","col-7"),i(K,"class","divider-vert col-1"),i(F,"type","checkbox"),i(Ee,"class","form-icon"),i(de,"class","form-switch"),i(je,"type","checkbox"),i(Xe,"class","form-icon"),i(le,"class","form-switch"),i(Se,"type","checkbox"),i(H,"class","form-icon"),i(ce,"class","form-switch"),i(S,"type","checkbox"),i(se,"class","form-icon"),i(Le,"class","form-switch"),i(Ae,"type","checkbox"),i(mt,"class","form-icon"),i(re,"class","form-switch"),i(et,"type","checkbox"),i(Pe,"class","form-icon"),i(Ie,"class","form-switch"),i(tt,"type","checkbox"),i(Oe,"class","form-icon"),i(Ye,"class","form-switch"),i(nt,"type","checkbox"),i(dt,"class","form-icon"),i(Ne,"class","form-switch"),i(lt,"type","checkbox"),i(Fe,"class","form-icon"),i(ye,"class","form-switch"),i(G,"class","col-12"),i(Q,"class","form-group"),i(V,"class","col-4"),i(t,"class","form-horizontal columns")},m(N,he){O(N,t,he),s(t,n),s(n,l),s(l,o),s(l,r),s(l,c),s(c,a),ne(a,e[0].name),s(n,m),s(n,f),s(f,d),s(f,_),s(f,p),s(p,h);for(let W=0;W<Je.length;W+=1)Je[W]&&Je[W].m(h,null);Be(h,e[0].midiPort,!0),s(n,k),s(n,v),s(v,g),s(v,w),s(v,D),s(D,y);for(let W=0;W<We.length;W+=1)We[W]&&We[W].m(y,null);Be(y,e[0].midiChannel,!0),s(n,j),s(n,z),s(z,A),s(z,P),s(z,U),s(U,C);for(let W=0;W<ze.length;W+=1)ze[W]&&ze[W].m(C,null);Be(C,e[0].default_note,!0),s(n,M),s(n,L),s(L,E),s(L,q),s(L,X),s(X,Z);for(let W=0;W<ue.length;W+=1)ue[W]&&ue[W].m(Z,null);Be(Z,e[0].default_patt,!0),s(t,T),s(t,K),s(t,te),s(t,V),s(V,Q),s(Q,G),s(G,de),s(de,F),F.checked=e[0].multi,s(de,De),s(de,Ee),s(de,ge),s(G,oe),s(G,le),s(le,je),je.checked=e[0].presend_pgm,s(le,Ge),s(le,Xe),s(le,Ce),s(G,Re),s(G,ce),s(ce,Se),Se.checked=e[0].poly_spread,s(ce,pe),s(ce,H),s(ce,_e),s(G,Y),s(G,Le),s(Le,S),S.checked=e[0].no_bankL,s(Le,ee),s(Le,se),s(Le,we),s(G,ve),s(G,re),s(re,Ae),Ae.checked=e[0].no_bankM,s(re,Ue),s(re,mt),s(re,At),s(G,bt),s(G,Ie),s(Ie,et),et.checked=e[0].no_xpose,s(Ie,gt),s(Ie,Pe),s(Ie,Ot),s(G,Ze),s(G,Ye),s(Ye,tt),tt.checked=e[0].no_fts,s(Ye,vt),s(Ye,Oe),s(Ye,zt),s(G,kt),s(G,Ne),s(Ne,nt),nt.checked=e[0].show_note_nums,s(Ne,Qe),s(Ne,dt),s(Ne,Ht),s(G,Ct),s(G,ye),s(ye,lt),lt.checked=e[0].no_thru,s(ye,wt),s(ye,Fe),s(ye,Pt),ot||(Tt=[I(a,"input",e[6]),I(a,"input",e[7]),I(h,"change",e[8]),I(h,"change",e[9]),I(y,"change",e[10]),I(y,"change",e[11]),I(C,"change",e[12]),I(C,"change",e[13]),I(Z,"change",e[14]),I(Z,"change",e[15]),I(F,"change",e[16]),I(F,"change",e[17]),I(je,"change",e[18]),I(je,"change",e[19]),I(Se,"change",e[20]),I(Se,"change",e[21]),I(S,"change",e[22]),I(S,"change",e[23]),I(Ae,"change",e[24]),I(Ae,"change",e[25]),I(et,"change",e[26]),I(et,"change",e[27]),I(tt,"change",e[28]),I(tt,"change",e[29]),I(nt,"change",e[30]),I(nt,"change",e[31]),I(lt,"change",e[32]),I(lt,"change",e[33]),I(t,"submit",Zt(e[5]))],ot=!0)},p(N,he){if(he[0]&1&&a.value!==N[0].name&&ne(a,N[0].name),he[0]&1&&ae(l,"error",!cn(N[0].name)),he[0]&1&&Be(h,N[0].midiPort),he[0]&1&&Be(y,N[0].midiChannel),he[0]&1&&ae(v,"error",!un(N[0].midiChannel)),he[0]&2){st=fe(N[1]);let W;for(W=0;W<st.length;W+=1){const Ve=hn(N,st,W);ze[W]?ze[W].p(Ve,he):(ze[W]=gn(Ve),ze[W].c(),ze[W].m(C,null))}for(;W<ze.length;W+=1)ze[W].d(1);ze.length=st.length}if(he[0]&1&&Be(C,N[0].default_note),he[0]&4){Me=fe(N[2]);let W;for(W=0;W<Me.length;W+=1){const Ve=_n(N,Me,W);ue[W]?ue[W].p(Ve,he):(ue[W]=vn(Ve),ue[W].c(),ue[W].m(Z,null))}for(;W<ue.length;W+=1)ue[W].d(1);ue.length=Me.length}he[0]&1&&Be(Z,N[0].default_patt),he[0]&1&&(F.checked=N[0].multi),he[0]&1&&(je.checked=N[0].presend_pgm),he[0]&1&&(Se.checked=N[0].poly_spread),he[0]&1&&(S.checked=N[0].no_bankL),he[0]&1&&(Ae.checked=N[0].no_bankM),he[0]&1&&(et.checked=N[0].no_xpose),he[0]&1&&(tt.checked=N[0].no_fts),he[0]&1&&(nt.checked=N[0].show_note_nums),he[0]&1&&(lt.checked=N[0].no_thru)},d(N){N&&R(t),Ke(Je,N),Ke(We,N),Ke(ze,N),Ke(ue,N),ot=!1,ke(Tt)}}}function Ol(e){let t;return{c(){t=u("option"),t.textContent=`${e[45]}`,t.__value=e[45],ne(t,t.__value)},m(n,l){O(n,t,l)},p:ie,d(n){n&&R(t)}}}function zl(e){let t;return{c(){t=u("option"),t.textContent=`${e[44]+1}`,t.__value=e[44]+1,ne(t,t.__value)},m(n,l){O(n,t,l)},p:ie,d(n){n&&R(t)}}}function gn(e){let t,n=e[39]+"",l;return{c(){t=u("option"),l=J(n),t.__value=e[39],ne(t,t.__value)},m(o,r){O(o,t,r),s(t,l)},p:ie,d(o){o&&R(t)}}}function vn(e){let t,n=e[36]+"",l;return{c(){t=u("option"),l=J(n),t.__value=e[36],ne(t,t.__value)},m(o,r){O(o,t,r),s(t,l)},p:ie,d(o){o&&R(t)}}}function Hl(e){let t,n=e[0]&&bn(e);return{c(){n&&n.c(),t=ht()},m(l,o){n&&n.m(l,o),O(l,t,o)},p(l,o){l[0]?n?n.p(l,o):(n=bn(l),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},i:ie,o:ie,d(l){l&&R(t),n&&n.d(l)}}}function Pl(e,t,n){let l,o;$e(e,x,F=>n(4,o=F));const r=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],a=[0,1,2,3,4,5,6].flatMap(F=>r.map(De=>`${De} ${F}`)),m=["P3","CK"];function f(F,De){x.updateInstrument({[F]:De})}function d(F){Qt.call(this,e,F)}function _(){l.name=this.value,n(0,l),n(4,o)}const p=F=>f("name",F.target.value);function h(){l.midiPort=St(this),n(0,l),n(4,o)}const k=F=>f("midiPort",F.target.value);function v(){l.midiChannel=St(this),n(0,l),n(4,o)}const g=F=>f("midiChannel",parseInt(F.target.value));function w(){l.default_note=St(this),n(0,l),n(4,o)}const D=F=>f("default_note",F.target.value);function y(){l.default_patt=St(this),n(0,l),n(4,o)}const j=F=>f("default_patt",F.target.value);function z(){l.multi=this.checked,n(0,l),n(4,o)}const A=F=>f("multi",F.target.checked);function P(){l.presend_pgm=this.checked,n(0,l),n(4,o)}const U=F=>f("presend_pgm",F.target.checked);function C(){l.poly_spread=this.checked,n(0,l),n(4,o)}const M=F=>f("poly_spread",F.target.checked);function L(){l.no_bankL=this.checked,n(0,l),n(4,o)}const E=F=>f("no_bankL",F.target.checked);function q(){l.no_bankM=this.checked,n(0,l),n(4,o)}const X=F=>f("no_bankM",F.target.checked);function Z(){l.no_xpose=this.checked,n(0,l),n(4,o)}const T=F=>f("no_xpose",F.target.checked);function K(){l.no_fts=this.checked,n(0,l),n(4,o)}const te=F=>f("no_fts",F.target.checked);function V(){l.show_note_nums=this.checked,n(0,l),n(4,o)}const Q=F=>f("show_note_nums",F.target.checked);function G(){l.no_thru=this.checked,n(0,l),n(4,o)}const de=F=>f("no_thru",F.target.checked);return e.$$.update=()=>{e.$$.dirty[0]&16&&n(0,l=o.selectedInstrument)},[l,a,m,f,o,d,_,p,h,k,v,g,w,D,y,j,z,A,P,U,C,M,L,E,q,X,Z,T,K,te,V,Q,G,de]}class Fl extends ut{constructor(t){super(),ct(this,t,Pl,Hl,xe,{},null,[-1,-1])}}function kn(e,t,n){const l=e.slice();return l[54]=t[n],l}function Cn(e,t,n){const l=e.slice();return l[57]=t[n],l}function wn(e,t,n){const l=e.slice();return l[60]=t[n],l}function In(e){let t,n=fe(e[8]),l=[];for(let o=0;o<n.length;o+=1)l[o]=yn(wn(e,n,o));return{c(){t=u("ul");for(let o=0;o<l.length;o+=1)l[o].c();i(t,"class","menu cc-template-menu svelte-94embb")},m(o,r){O(o,t,r);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(t,null)},p(o,r){if(r[0]&768){n=fe(o[8]);let c;for(c=0;c<n.length;c+=1){const a=wn(o,n,c);l[c]?l[c].p(a,r):(l[c]=yn(a),l[c].c(),l[c].m(t,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(o){o&&R(t),Ke(l,o)}}}function yn(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k;function v(){return e[23](e[60])}function g(){return e[24](e[60])}return{c(){t=u("li"),n=u("div"),l=u("div"),o=u("span"),o.textContent=`${e[60].name}`,r=b(),c=u("span"),c.textContent=`${e[60].count} CCs`,a=b(),m=u("div"),f=u("button"),f.textContent="Merge",d=b(),_=u("button"),_.textContent="Replace",p=b(),i(o,"class","cc-template-name svelte-94embb"),i(c,"class","cc-template-count svelte-94embb"),i(l,"class","cc-template-info svelte-94embb"),i(f,"class","btn btn-sm svelte-94embb"),i(_,"class","btn btn-sm svelte-94embb"),i(m,"class","cc-template-actions svelte-94embb"),i(n,"class","cc-template-item svelte-94embb"),i(t,"class","menu-item")},m(w,D){O(w,t,D),s(t,n),s(n,l),s(l,o),s(l,r),s(l,c),s(n,a),s(n,m),s(m,f),s(m,d),s(m,_),s(t,p),h||(k=[I(f,"click",v),I(_,"click",g)],h=!0)},p(w,D){e=w},d(w){w&&R(t),h=!1,ke(k)}}}function Mn(e){let t,n=fe(e[7]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Tn(Cn(e,n,o));return{c(){t=u("ul");for(let o=0;o<l.length;o+=1)l[o].c();i(t,"class","menu cc-template-menu svelte-94embb")},m(o,r){O(o,t,r);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(t,null)},p(o,r){if(r[0]&1152){n=fe(o[7]);let c;for(c=0;c<n.length;c+=1){const a=Cn(o,n,c);l[c]?l[c].p(a,r):(l[c]=Tn(a),l[c].c(),l[c].m(t,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(o){o&&R(t),Ke(l,o)}}}function Tn(e){let t,n,l,o,r=e[57].name+"",c,a,m,f=e[57].continuousControls.length+"",d,_,p,h,k,v,g,w,D,y;function j(){return e[26](e[57])}function z(){return e[27](e[57])}return{c(){t=u("li"),n=u("div"),l=u("div"),o=u("span"),c=J(r),a=b(),m=u("span"),d=J(f),_=J(" CCs"),p=b(),h=u("div"),k=u("button"),k.textContent="Merge",v=b(),g=u("button"),g.textContent="Replace",w=b(),i(o,"class","cc-template-name svelte-94embb"),i(m,"class","cc-template-count svelte-94embb"),i(l,"class","cc-template-info svelte-94embb"),i(k,"class","btn btn-sm svelte-94embb"),i(g,"class","btn btn-sm svelte-94embb"),i(h,"class","cc-template-actions svelte-94embb"),i(n,"class","cc-template-item svelte-94embb"),i(t,"class","menu-item")},m(A,P){O(A,t,P),s(t,n),s(n,l),s(l,o),s(o,c),s(l,a),s(l,m),s(m,d),s(m,_),s(n,p),s(n,h),s(h,k),s(h,v),s(h,g),s(t,w),D||(y=[I(k,"click",j),I(g,"click",z)],D=!0)},p(A,P){e=A,P[0]&128&&r!==(r=e[57].name+"")&&be(c,r),P[0]&128&&f!==(f=e[57].continuousControls.length+"")&&be(d,f)},d(A){A&&R(t),D=!1,ke(y)}}}function Dn(e){let t,n=fe(e[6]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Ln(kn(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=ht()},m(o,r){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(o,r);O(o,t,r)},p(o,r){if(r[0]&16449){n=fe(o[6]);let c;for(c=0;c<n.length;c+=1){const a=kn(o,n,c);l[c]?l[c].p(a,r):(l[c]=Ln(a),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(o){o&&R(t),Ke(l,o)}}}function Ln(e){let t,n,l=e[54].name+"",o,r,c,a=e[54].cc+"",m,f,d,_=e[54].min+"",p,h,k,v=e[54].max+"",g,w,D,y=e[54].start+"",j,z,A,P;function U(){return e[30](e[54])}return{c(){t=u("tr"),n=u("td"),o=J(l),r=b(),c=u("td"),m=J(a),f=b(),d=u("td"),p=J(_),h=b(),k=u("td"),g=J(v),w=b(),D=u("td"),j=J(y),z=b(),i(n,"class","svelte-94embb"),i(c,"class","svelte-94embb"),i(d,"class","svelte-94embb"),i(k,"class","svelte-94embb"),i(D,"class","svelte-94embb"),B(t,"cursor","pointer"),i(t,"class","svelte-94embb"),ae(t,"active",e[54]===e[0])},m(C,M){O(C,t,M),s(t,n),s(n,o),s(t,r),s(t,c),s(c,m),s(t,f),s(t,d),s(d,p),s(t,h),s(t,k),s(k,g),s(t,w),s(t,D),s(D,j),s(t,z),A||(P=I(t,"click",U),A=!0)},p(C,M){e=C,M[0]&64&&l!==(l=e[54].name+"")&&be(o,l),M[0]&64&&a!==(a=e[54].cc+"")&&be(m,a),M[0]&64&&_!==(_=e[54].min+"")&&be(p,_),M[0]&64&&v!==(v=e[54].max+"")&&be(g,v),M[0]&64&&y!==(y=e[54].start+"")&&be(j,y),M[0]&65&&ae(t,"active",e[54]===e[0])},d(C){C&&R(t),A=!1,P()}}}function Vl(e){let t,n,l;return{c(){t=u("button"),t.textContent="Add new",i(t,"type","button"),i(t,"class","btn btn-sm btn-primary tooltip"),i(t,"data-tooltip","Add new continuous control to list.")},m(o,r){O(o,t,r),n||(l=I(t,"click",e[16]),n=!0)},p:ie,d(o){o&&R(t),n=!1,l()}}}function Bl(e){let t,n,l,o,r;return{c(){t=u("button"),t.textContent="Delete",n=b(),l=u("button"),l.textContent="Add New",i(t,"type","button"),i(t,"class","btn btn-sm btn-error tooltip"),i(t,"data-tooltip","Delete selected continuous control from list."),i(l,"type","button"),i(l,"class","btn btn-sm tooltip"),i(l,"data-tooltip","Clear selection and add new continuous control.")},m(c,a){O(c,t,a),O(c,n,a),O(c,l,a),o||(r=[I(t,"click",e[17]),I(l,"click",e[49])],o=!0)},p:ie,d(c){c&&(R(t),R(n),R(l)),o=!1,ke(r)}}}function Nn(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g,w,D,y,j,z,A,P,U;return{c(){t=u("div"),n=u("button"),l=b(),o=u("div"),r=u("div"),r.innerHTML='<div class="modal-title h6" style="font-size: 0.8rem;">Track Controls Warning</div>',c=b(),a=u("div"),m=u("div"),f=u("p"),d=J("Your Track Controls currently use MIDI CCs. Importing from "),_=u("strong"),p=J(e[5]),h=J(" will:"),k=b(),v=u("ul"),v.innerHTML=`<li>Re-link Track Controls to matching CC numbers if they exist in the
              import</li> <li>Set Track Controls to null if their CC numbers are not in the
              import</li> <li>Keep Track Control configuration (names and settings) intact</li>`,g=b(),w=u("p"),w.textContent="Continue with import?",D=b(),y=u("div"),j=u("button"),j.textContent="Continue",z=b(),A=u("button"),A.textContent="Cancel",i(n,"class","modal-overlay"),i(n,"aria-label","Close modal"),i(n,"type","button"),i(r,"class","modal-header"),B(f,"font-size","0.75rem"),B(f,"margin-bottom","0.5rem"),B(v,"font-size","0.7rem"),B(v,"margin-left","1rem"),B(v,"margin-bottom","0.5rem"),B(w,"font-size","0.75rem"),B(w,"color","#e85600"),B(w,"font-weight","600"),i(m,"class","content"),i(a,"class","modal-body"),i(j,"class","btn btn-sm btn-primary svelte-94embb"),B(j,"font-size","0.75rem"),i(A,"class","btn btn-sm svelte-94embb"),B(A,"font-size","0.75rem"),i(y,"class","modal-footer svelte-94embb"),i(o,"class","modal-container svelte-94embb"),i(o,"role","document"),i(t,"class","modal modal-sm active svelte-94embb")},m(C,M){O(C,t,M),s(t,n),s(t,l),s(t,o),s(o,r),s(o,c),s(o,a),s(a,m),s(m,f),s(f,d),s(f,_),s(_,p),s(f,h),s(m,k),s(m,v),s(m,g),s(m,w),s(o,D),s(o,y),s(y,j),s(y,z),s(y,A),P||(U=[I(n,"click",e[12]),I(j,"click",e[11]),I(A,"click",e[12])],P=!0)},p(C,M){M[0]&32&&be(p,C[5])},d(C){C&&R(t),P=!1,ke(U)}}}function Ul(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g,w,D,y,j,z,A,P,U,C=e[6].length+"",M,L,E,q,X,Z,T,K,te,V,Q,G,de,F,De,Ee,ge,oe,le,je,Ge=e[0]?"Edit":"New",Xe,Ce,Re,ce,Se,pe,H,_e,Y,Le,S,ee,se,we,ve,re,Ae,Ue,mt,At,bt,Ie,et,gt,Pe,Ot,Ze,Ye,tt,vt,Oe,zt,kt,Ne,nt,Qe,dt,Ht,Ct,ye,lt,wt,Fe,Pt,ot,Tt,Ft,Je,Dt,We,st,ze,Me=e[2]&&In(e),ue=e[3]&&Mn(e),N=e[6].length>0&&Dn(e);function he($,me){return $[0]?Bl:Vl}let W=he(e),Ve=W(e),qe=e[4]&&Nn(e);return{c(){t=u("div"),n=u("div"),l=u("div"),o=u("div"),r=u("div"),c=u("div"),a=u("div"),m=u("button"),m.textContent="Load Template",f=b(),Me&&Me.c(),d=b(),_=u("div"),p=u("button"),h=J("Copy from Instrument"),v=b(),ue&&ue.c(),g=b(),w=u("button"),D=J("Delete All"),j=b(),z=u("div"),A=u("span"),P=J("CC Total: "),U=u("strong"),M=J(C),L=b(),E=u("div"),q=u("span"),q.textContent="Sort by",X=b(),Z=u("div"),T=u("button"),T.textContent="CC num",K=b(),te=u("button"),te.textContent="name",V=b(),Q=u("table"),G=u("thead"),G.innerHTML='<tr class="svelte-94embb"><th class="svelte-94embb">Name</th> <th class="svelte-94embb">CC Num</th> <th class="svelte-94embb">Min</th> <th class="svelte-94embb">Max</th> <th class="svelte-94embb">Start</th></tr>',de=b(),F=u("tbody"),N&&N.c(),De=b(),Ee=u("div"),ge=b(),oe=u("div"),le=u("form"),je=u("legend"),Xe=J(Ge),Ce=b(),Re=u("div"),ce=u("div"),ce.innerHTML='<label class="form-label" for="midi-cc-name">Name</label>',Se=b(),pe=u("div"),H=u("input"),_e=b(),Y=u("div"),Le=u("div"),Le.innerHTML='<label class="form-label" for="midi-cc-num">CC Num</label>',S=b(),ee=u("div"),se=u("input"),we=b(),ve=u("div"),re=u("input"),Ae=b(),Ue=u("div"),mt=u("div"),mt.innerHTML='<label class="form-label" for="midi-cc-min">Min Value</label>',At=b(),bt=u("div"),Ie=u("input"),et=b(),gt=u("div"),Pe=u("input"),Ot=b(),Ze=u("div"),Ye=u("div"),Ye.innerHTML='<label class="form-label" for="midi-cc-max">Max Value</label>',tt=b(),vt=u("div"),Oe=u("input"),zt=b(),kt=u("div"),Ne=u("input"),nt=b(),Qe=u("div"),dt=u("div"),dt.innerHTML='<label class="form-label" for="midi-cc-start">Start Value</label>',Ht=b(),Ct=u("div"),ye=u("input"),lt=b(),wt=u("div"),Fe=u("input"),Pt=b(),ot=u("div"),Tt=u("div"),Ft=b(),Je=u("div"),Ve.c(),Dt=b(),qe&&qe.c(),We=ht(),i(m,"class","btn btn-sm btn-primary dropdown-toggle"),i(a,"class","dropdown svelte-94embb"),ae(a,"active",e[2]),i(p,"class","btn btn-sm btn-primary dropdown-toggle"),p.disabled=k=e[7].length===0,i(_,"class","dropdown svelte-94embb"),ae(_,"active",e[3]),i(w,"class","btn btn-sm btn-error"),w.disabled=y=e[6].length===0,i(c,"class","cc-footer-left svelte-94embb"),B(A,"margin-left","1rem"),B(A,"white-space","nowrap"),i(z,"class","cc-footer-middle svelte-94embb"),B(q,"margin-right","0.3rem"),B(q,"white-space","nowrap"),i(T,"class","btn btn-sm"),i(te,"class","btn btn-sm"),i(Z,"class","btn-group"),i(E,"class","cc-footer-right svelte-94embb"),i(r,"class","cc-footer-controls svelte-94embb"),i(o,"class","cc-controls-header svelte-94embb"),i(G,"class","cc-table-header svelte-94embb"),i(F,"class","svelte-94embb"),i(Q,"class","table table-striped table-hover svelte-94embb"),i(l,"class","cc-table-wrapper svelte-94embb"),i(n,"class","column col-6"),i(Ee,"class","divider-vert col-1"),i(ce,"class","col-3"),i(H,"id","midi-cc-name"),i(H,"class","form-input"),i(H,"type","search"),i(H,"maxlength","6"),i(H,"placeholder","name"),i(pe,"class","col-9"),i(Re,"class","form-group"),i(Le,"class","col-3"),i(se,"id","midi-cc-num"),i(se,"class","form-input"),i(se,"type","text"),i(se,"inputmode","numeric"),i(se,"min","0"),i(se,"max","127"),i(se,"placeholder","cc"),i(ee,"class","col-2"),i(re,"class","slider rangeslider"),i(re,"type","range"),i(re,"min","0"),i(re,"max","127"),i(re,"aria-label","CC Number slider"),i(ve,"class","col-7"),i(Y,"class","form-group"),i(mt,"class","col-3"),i(Ie,"id","midi-cc-min"),i(Ie,"class","form-input"),i(Ie,"type","text"),i(Ie,"inputmode","numeric"),i(Ie,"min","0"),i(Ie,"max","127"),i(Ie,"placeholder","min"),i(bt,"class","col-2"),i(Pe,"class","slider rangeslider"),i(Pe,"type","range"),i(Pe,"min","0"),i(Pe,"max","127"),i(Pe,"aria-label","Min Value slider"),i(gt,"class","col-7"),i(Ue,"class","form-group"),i(Ye,"class","col-3"),i(Oe,"id","midi-cc-max"),i(Oe,"class","form-input"),i(Oe,"type","text"),i(Oe,"inputmode","numeric"),i(Oe,"min","0"),i(Oe,"max","127"),i(Oe,"placeholder","max"),i(vt,"class","col-2"),i(Ne,"class","slider rangeslider"),i(Ne,"type","range"),i(Ne,"min","0"),i(Ne,"max","127"),i(Ne,"aria-label","Max Value slider"),i(kt,"class","col-7"),i(Ze,"class","form-group"),i(dt,"class","col-3"),i(ye,"id","midi-cc-start"),i(ye,"class","form-input"),i(ye,"type","text"),i(ye,"inputmode","numeric"),i(ye,"min","0"),i(ye,"max","127"),i(ye,"placeholder","start"),i(Ct,"class","col-2"),i(Fe,"class","slider rangeslider"),i(Fe,"type","range"),i(Fe,"min","0"),i(Fe,"max","127"),i(Fe,"aria-label","Start Value slider"),i(wt,"class","col-7"),i(Qe,"class","form-group"),i(Tt,"class","col-3"),i(Je,"class","col-9"),i(ot,"class","form-group"),i(le,"class","form-horizontal"),i(oe,"class","column col-5"),i(t,"class","columns")},m($,me){O($,t,me),s(t,n),s(n,l),s(l,o),s(o,r),s(r,c),s(c,a),s(a,m),s(a,f),Me&&Me.m(a,null),s(c,d),s(c,_),s(_,p),s(p,h),s(_,v),ue&&ue.m(_,null),s(c,g),s(c,w),s(w,D),s(r,j),s(r,z),s(z,A),s(A,P),s(A,U),s(U,M),s(r,L),s(r,E),s(E,q),s(E,X),s(E,Z),s(Z,T),s(Z,K),s(Z,te),s(l,V),s(l,Q),s(Q,G),s(Q,de),s(Q,F),N&&N.m(F,null),s(t,De),s(t,Ee),s(t,ge),s(t,oe),s(oe,le),s(le,je),s(je,Xe),s(le,Ce),s(le,Re),s(Re,ce),s(Re,Se),s(Re,pe),s(pe,H),ne(H,e[1].name),s(le,_e),s(le,Y),s(Y,Le),s(Y,S),s(Y,ee),s(ee,se),ne(se,e[1].cc),s(Y,we),s(Y,ve),s(ve,re),ne(re,e[1].cc),s(le,Ae),s(le,Ue),s(Ue,mt),s(Ue,At),s(Ue,bt),s(bt,Ie),ne(Ie,e[1].min),s(Ue,et),s(Ue,gt),s(gt,Pe),ne(Pe,e[1].min),s(le,Ot),s(le,Ze),s(Ze,Ye),s(Ze,tt),s(Ze,vt),s(vt,Oe),ne(Oe,e[1].max),s(Ze,zt),s(Ze,kt),s(kt,Ne),ne(Ne,e[1].max),s(le,nt),s(le,Qe),s(Qe,dt),s(Qe,Ht),s(Qe,Ct),s(Ct,ye),ne(ye,e[1].start),s(Qe,lt),s(Qe,wt),s(wt,Fe),ne(Fe,e[1].start),s(le,Pt),s(le,ot),s(ot,Tt),s(ot,Ft),s(ot,Je),Ve.m(Je,null),O($,Dt,me),qe&&qe.m($,me),O($,We,me),st||(ze=[I(m,"click",e[22]),I(p,"click",e[25]),I(w,"click",e[13]),I(T,"click",e[28]),I(te,"click",e[29]),I(H,"input",e[31]),I(H,"input",e[32]),I(se,"input",e[33]),I(se,"input",e[34]),I(re,"change",e[35]),I(re,"input",e[35]),I(re,"input",e[36]),I(Ie,"input",e[37]),I(Ie,"input",e[38]),I(Pe,"change",e[39]),I(Pe,"input",e[39]),I(Pe,"input",e[40]),I(Oe,"input",e[41]),I(Oe,"input",e[42]),I(Ne,"change",e[43]),I(Ne,"input",e[43]),I(Ne,"input",e[44]),I(ye,"input",e[45]),I(ye,"input",e[46]),I(Fe,"change",e[47]),I(Fe,"input",e[47]),I(Fe,"input",e[48]),I(le,"submit",Zt(e[21]))],st=!0)},p($,me){$[2]?Me?Me.p($,me):(Me=In($),Me.c(),Me.m(a,null)):Me&&(Me.d(1),Me=null),me[0]&4&&ae(a,"active",$[2]),me[0]&128&&k!==(k=$[7].length===0)&&(p.disabled=k),$[3]?ue?ue.p($,me):(ue=Mn($),ue.c(),ue.m(_,null)):ue&&(ue.d(1),ue=null),me[0]&8&&ae(_,"active",$[3]),me[0]&64&&y!==(y=$[6].length===0)&&(w.disabled=y),me[0]&64&&C!==(C=$[6].length+"")&&be(M,C),$[6].length>0?N?N.p($,me):(N=Dn($),N.c(),N.m(F,null)):N&&(N.d(1),N=null),me[0]&1&&Ge!==(Ge=$[0]?"Edit":"New")&&be(Xe,Ge),me[0]&2&&H.value!==$[1].name&&ne(H,$[1].name),me[0]&2&&se.value!==$[1].cc&&ne(se,$[1].cc),me[0]&2&&ne(re,$[1].cc),me[0]&2&&Ie.value!==$[1].min&&ne(Ie,$[1].min),me[0]&2&&ne(Pe,$[1].min),me[0]&2&&Oe.value!==$[1].max&&ne(Oe,$[1].max),me[0]&2&&ne(Ne,$[1].max),me[0]&2&&ye.value!==$[1].start&&ne(ye,$[1].start),me[0]&2&&ne(Fe,$[1].start),W===(W=he($))&&Ve?Ve.p($,me):(Ve.d(1),Ve=W($),Ve&&(Ve.c(),Ve.m(Je,null))),$[4]?qe?qe.p($,me):(qe=Nn($),qe.c(),qe.m(We.parentNode,We)):qe&&(qe.d(1),qe=null)},i:ie,o:ie,d($){$&&(R(t),R(Dt),R(We)),Me&&Me.d(),ue&&ue.d(),N&&N.d(),Ve.d(),qe&&qe.d($),st=!1,ke(ze)}}}function Kl(e,t,n){let l,o,r,c;$e(e,x,S=>n(20,c=S));let a=null,m=pt(),f=!1,d=!1,_=!1,p=null,h=!1,k="";const v=[{file:"midi-cc-general.json",name:"General MIDI",count:13},{file:"midi-cc-synth.json",name:"Synthesizer",count:11},{file:"midi-cc-syntakt.json",name:"Elektron Syntakt",count:16},{file:"midi-cc-analog-four.json",name:"Elektron Analog Four",count:24},{file:"midi-cc-analog-rytm.json",name:"Elektron Analog Rytm",count:28},{file:"midi-cc-digitone.json",name:"Elektron Digitone",count:18},{file:"midi-cc-eventide-space.json",name:"Eventide Space",count:11},{file:"midi-cc-empress-echosystem.json",name:"Empress Echosystem",count:10}];async function g(S,ee=!1){try{const se=`/cirklon_organiser_v2/templates/${S}`,re=(await(await fetch(se)).json()).controls.map(Ue=>({...Ue})),Ae=v.find(Ue=>Ue.file===S);n(5,k=(Ae==null?void 0:Ae.name)||S),D(re,ee),n(2,f=!1)}catch(se){alert("Failed to load template: "+se.message)}}function w(S,ee=!1){const se=S.continuousControls.map(we=>({...we}));n(5,k=S.name),D(se,ee),n(3,d=!1)}function D(S,ee=!1){var we;if((we=l==null?void 0:l.trackControls)==null?void 0:we.some(ve=>ve.option==="MIDI CC"&&ve.continuousControl)){p=S,h=ee,n(4,_=!0);return}y(S,ee)}function y(S,ee=!1){let se;if(ee){const ve=new Map;o.forEach(re=>{ve.set(re.cc,re)}),S.forEach(re=>{ve.set(re.cc,re)}),se=Array.from(ve.values()).sort((re,Ae)=>parseInt(re.cc)-parseInt(Ae.cc))}else se=S.sort((ve,re)=>parseInt(ve.cc)-parseInt(re.cc));const we=l.trackControls.map(ve=>{if(ve.option==="MIDI CC"&&ve.ccNumber!==void 0){const re=se.find(Ae=>Ae.cc===ve.ccNumber);return{...ve,continuousControl:re||null}}return ve});x.updateInstrument({continuousControls:se,trackControls:we}),n(0,a=null),n(1,m=pt())}function j(){n(4,_=!1),y(p,h),p=null,h=!1,n(5,k="")}function z(){n(4,_=!1),p=null,h=!1,n(5,k="")}function A(){o.length!==0&&confirm(`Delete all ${o.length} MIDI CCs? This cannot be undone.`)&&(x.updateInstrument({continuousControls:[]}),n(0,a=null),n(1,m=pt()))}function P(S){n(0,a=S),n(1,m={...S})}function U(S,ee){if(n(1,m={...m,[S]:ee}),a){const se=o.map(we=>we===a?{...m}:we);x.updateInstrument({continuousControls:se}),n(0,a=se.find(we=>we.cc===m.cc&&we.name===m.name))}}function C(){const S=[...o,{...m}];x.updateInstrument({continuousControls:S}),n(1,m=pt()),n(0,a=null)}function M(){if(!a)return;const S=o.filter(ee=>ee!==a);x.updateInstrument({continuousControls:S}),n(1,m=pt()),n(0,a=null)}function L(S){const ee=[...o].sort((se,we)=>S==="cc"?parseInt(se.cc)-parseInt(we.cc):se[S].localeCompare(we[S]));x.updateInstrument({continuousControls:ee})}function E(S){Qt.call(this,e,S)}const q=()=>n(2,f=!f),X=S=>g(S.file,!0),Z=S=>g(S.file,!1),T=()=>n(3,d=!d),K=S=>w(S,!0),te=S=>w(S,!1),V=()=>L("cc"),Q=()=>L("name"),G=S=>P(S);function de(){m.name=this.value,n(1,m)}const F=S=>U("name",S.target.value);function De(){m.cc=this.value,n(1,m)}const Ee=S=>{const ee=S.target.value===""?"":parseInt(S.target.value);(ee===""||ee>=0&&ee<=127)&&U("cc",ee)};function ge(){m.cc=qt(this.value),n(1,m)}const oe=S=>U("cc",parseInt(S.target.value));function le(){m.min=this.value,n(1,m)}const je=S=>{const ee=S.target.value===""?"":parseInt(S.target.value);(ee===""||ee>=0&&ee<=127)&&U("min",ee)};function Ge(){m.min=qt(this.value),n(1,m)}const Xe=S=>U("min",parseInt(S.target.value));function Ce(){m.max=this.value,n(1,m)}const Re=S=>{const ee=S.target.value===""?"":parseInt(S.target.value);(ee===""||ee>=0&&ee<=127)&&U("max",ee)};function ce(){m.max=qt(this.value),n(1,m)}const Se=S=>U("max",parseInt(S.target.value));function pe(){m.start=this.value,n(1,m)}const H=S=>{const ee=S.target.value===""?"":parseInt(S.target.value);(ee===""||ee>=0&&ee<=127)&&U("start",ee)};function _e(){m.start=qt(this.value),n(1,m)}const Y=S=>U("start",parseInt(S.target.value)),Le=()=>{n(0,a=null),n(1,m=pt())};return e.$$.update=()=>{e.$$.dirty[0]&1048576&&n(19,l=c.selectedInstrument),e.$$.dirty[0]&524288&&n(6,o=(l==null?void 0:l.continuousControls)||[]),e.$$.dirty[0]&1572864&&n(7,r=c.instruments.filter(S=>S!==l))},[a,m,f,d,_,k,o,r,v,g,w,j,z,A,P,U,C,M,L,l,c,E,q,X,Z,T,K,te,V,Q,G,de,F,De,Ee,ge,oe,le,je,Ge,Xe,Ce,Re,ce,Se,pe,H,_e,Y,Le]}class ql extends ut{constructor(t){super(),ct(this,t,Kl,Ul,xe,{},null,[-1,-1,-1])}}function Gl(e,t,n){const l=e.slice();return l[29]=t[n],l}function En(e,t,n){const l=e.slice();return l[32]=t[n],l}function Sn(e,t,n){const l=e.slice();return l[35]=t[n],l}function jn(e,t,n){const l=e.slice();return l[38]=t[n],l[40]=n,l}function Jl(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g;function w(){return e[21](e[40])}function D(){return e[22](e[40])}function y(){return e[23](e[40])}function j(){return e[24](e[40])}function z(){return e[25](e[40])}return{c(){t=u("div"),n=u("button"),l=u("i"),o=b(),r=u("button"),c=u("i"),m=b(),f=u("button"),f.textContent="+",d=b(),_=u("button"),_.textContent="+",p=b(),h=u("button"),h.innerHTML='<i class="icon icon-delete svelte-14dirsn"></i>',k=b(),i(l,"class","icon icon-arrow-up svelte-14dirsn"),i(n,"type","button"),i(n,"class","btn btn-sm btn-action tooltip svelte-14dirsn"),i(n,"data-tooltip","Move row up"),n.disabled=Math.floor(e[40]/6)===0,i(c,"class","icon icon-arrow-down svelte-14dirsn"),i(r,"type","button"),i(r,"class","btn btn-sm btn-action tooltip svelte-14dirsn"),i(r,"data-tooltip","Move row down"),r.disabled=a=Math.floor(e[40]/6)>=Math.ceil(e[2].length/6)-1,i(f,"type","button"),i(f,"class","btn btn-sm btn-action btn-success tooltip svelte-14dirsn"),i(f,"data-tooltip","Insert row above"),i(_,"type","button"),i(_,"class","btn btn-sm btn-action btn-success tooltip svelte-14dirsn"),i(_,"data-tooltip","Insert row below"),i(h,"type","button"),i(h,"class","btn btn-sm btn-action btn-error tooltip svelte-14dirsn"),i(h,"data-tooltip","Delete this row"),i(t,"class","row-actions svelte-14dirsn")},m(A,P){O(A,t,P),s(t,n),s(n,l),s(t,o),s(t,r),s(r,c),s(t,m),s(t,f),s(t,d),s(t,_),s(t,p),s(t,h),s(t,k),v||(g=[I(n,"click",w),I(r,"click",D),I(f,"click",y),I(_,"click",j),I(h,"click",z)],v=!0)},p(A,P){e=A,P[0]&4&&a!==(a=Math.floor(e[40]/6)>=Math.ceil(e[2].length/6)-1)&&(r.disabled=a)},d(A){A&&R(t),v=!1,ke(g)}}}function Rn(e){let t,n,l=e[9](e[38])+"",o,r,c,a=e[10](e[38])+"",m,f,d,_,p;function h(){return e[20](e[38])}let k=(e[40]+1)%6===0&&Jl(e);return{c(){t=u("button"),n=u("div"),o=J(l),r=b(),c=u("div"),m=J(a),f=b(),k&&k.c(),d=ht(),i(t,"type","button"),i(t,"class","control"),B(t,"cursor","pointer"),ae(t,"active",e[38]===e[0]),ae(t,"cc",e[38].option===yt),ae(t,"track",e[38].option===Mt)},m(v,g){O(v,t,g),s(t,n),s(n,o),s(t,r),s(t,c),s(c,m),O(v,f,g),k&&k.m(v,g),O(v,d,g),_||(p=I(t,"click",h),_=!0)},p(v,g){e=v,g[0]&4&&l!==(l=e[9](e[38])+"")&&be(o,l),g[0]&4&&a!==(a=e[10](e[38])+"")&&be(m,a),g[0]&5&&ae(t,"active",e[38]===e[0]),g[0]&4&&ae(t,"cc",e[38].option===yt),g[0]&4&&ae(t,"track",e[38].option===Mt),(e[40]+1)%6===0&&k.p(e,g)},d(v){v&&(R(t),R(f),R(d)),k&&k.d(v),_=!1,p()}}}function Wl(e){let t;return{c(){t=u("legend"),t.textContent="Select a element to Edit"},m(n,l){O(n,t,l)},d(n){n&&R(t)}}}function Xl(e){let t;return{c(){t=u("legend"),t.textContent="Edit"},m(n,l){O(n,t,l)},d(n){n&&R(t)}}}function An(e){let t,n,l,o,r,c,a,m,f,d,_=fe(e[4]),p=[];for(let v=0;v<_.length;v+=1)p[v]=On(Sn(e,_,v));let h=e[1].option===yt&&zn(e),k=e[1].option===Mt&&Pn(e);return{c(){t=u("div"),n=u("div"),n.innerHTML='<label class="form-label" for="track-control-type">Type</label>',l=b(),o=u("div"),r=u("select");for(let v=0;v<p.length;v+=1)p[v].c();c=b(),h&&h.c(),a=b(),k&&k.c(),m=ht(),i(n,"class","col-3"),i(r,"id","track-control-type"),i(r,"class","form-select"),e[1].option===void 0&&at(()=>e[26].call(r)),i(o,"class","col-9"),i(t,"class","form-group")},m(v,g){O(v,t,g),s(t,n),s(t,l),s(t,o),s(o,r);for(let w=0;w<p.length;w+=1)p[w]&&p[w].m(r,null);Be(r,e[1].option,!0),O(v,c,g),h&&h.m(v,g),O(v,a,g),k&&k.m(v,g),O(v,m,g),f||(d=[I(r,"change",e[26]),I(r,"change",e[6])],f=!0)},p(v,g){if(g[0]&16){_=fe(v[4]);let w;for(w=0;w<_.length;w+=1){const D=Sn(v,_,w);p[w]?p[w].p(D,g):(p[w]=On(D),p[w].c(),p[w].m(r,null))}for(;w<p.length;w+=1)p[w].d(1);p.length=_.length}g[0]&18&&Be(r,v[1].option),v[1].option===yt?h?h.p(v,g):(h=zn(v),h.c(),h.m(a.parentNode,a)):h&&(h.d(1),h=null),v[1].option===Mt?k?k.p(v,g):(k=Pn(v),k.c(),k.m(m.parentNode,m)):k&&(k.d(1),k=null)},d(v){v&&(R(t),R(c),R(a),R(m)),Ke(p,v),h&&h.d(v),k&&k.d(v),f=!1,ke(d)}}}function On(e){let t,n=e[35]+"",l;return{c(){t=u("option"),l=J(n),t.__value=e[35],ne(t,t.__value)},m(o,r){O(o,t,r),s(t,l)},p:ie,d(o){o&&R(t)}}}function zn(e){let t,n,l,o,r,c,a,m,f,d=fe(e[3]),_=[];for(let p=0;p<d.length;p+=1)_[p]=Hn(En(e,d,p));return{c(){t=u("div"),n=u("div"),n.innerHTML='<label class="form-label" for="track-control-cc">CC</label>',l=b(),o=u("div"),r=u("select"),c=u("option"),c.textContent="Select CC...";for(let p=0;p<_.length;p+=1)_[p].c();i(n,"class","col-3"),c.__value="",ne(c,c.__value),i(r,"id","track-control-cc"),i(r,"class","form-select"),i(o,"class","col-9"),i(t,"class","form-group")},m(p,h){var k;O(p,t,h),s(t,n),s(t,l),s(t,o),s(o,r),s(r,c);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(r,null);Be(r,((k=e[1].continuousControl)==null?void 0:k.cc)||""),m||(f=I(r,"change",e[27]),m=!0)},p(p,h){var k,v;if(h[0]&8){d=fe(p[3]);let g;for(g=0;g<d.length;g+=1){const w=En(p,d,g);_[g]?_[g].p(w,h):(_[g]=Hn(w),_[g].c(),_[g].m(r,null))}for(;g<_.length;g+=1)_[g].d(1);_.length=d.length}h[0]&18&&a!==(a=((k=p[1].continuousControl)==null?void 0:k.cc)||"")&&Be(r,((v=p[1].continuousControl)==null?void 0:v.cc)||"")},d(p){p&&R(t),Ke(_,p),m=!1,f()}}}function Hn(e){let t,n=(e[32].label||`CC #${e[32].cc} - ${e[32].name}`)+"",l,o;return{c(){t=u("option"),l=J(n),t.__value=o=e[32].cc,ne(t,t.__value)},m(r,c){O(r,t,c),s(t,l)},p(r,c){c[0]&8&&n!==(n=(r[32].label||`CC #${r[32].cc} - ${r[32].name}`)+"")&&be(l,n),c[0]&8&&o!==(o=r[32].cc)&&(t.__value=o,ne(t,t.__value))},d(r){r&&R(t)}}}function Pn(e){let t,n,l,o,r,c,a,m=fe(hl),f=[];for(let d=0;d<m.length;d+=1)f[d]=Yl(Gl(e,m,d));return{c(){t=u("div"),n=u("div"),n.innerHTML='<label class="form-label" for="track-control-value">Track CTRL</label>',l=b(),o=u("div"),r=u("select");for(let d=0;d<f.length;d+=1)f[d].c();i(n,"class","col-3"),i(r,"id","track-control-value"),i(r,"class","form-select"),e[1].trackValue===void 0&&at(()=>e[28].call(r)),i(o,"class","col-9"),i(t,"class","form-group")},m(d,_){O(d,t,_),s(t,n),s(t,l),s(t,o),s(o,r);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(r,null);Be(r,e[1].trackValue,!0),c||(a=[I(r,"change",e[28]),I(r,"change",e[6])],c=!0)},p(d,_){_[0]&18&&Be(r,d[1].trackValue)},d(d){d&&R(t),Ke(f,d),c=!1,ke(a)}}}function Yl(e){let t;return{c(){t=u("option"),t.textContent=`${e[29]}`,t.__value=e[29],ne(t,t.__value)},m(n,l){O(n,t,l)},p:ie,d(n){n&&R(t)}}}function Zl(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g,w,D,y,j,z,A,P,U=fe(e[2]),C=[];for(let X=0;X<U.length;X+=1)C[X]=Rn(jn(e,U,X));function M(X,Z){return X[0]?Xl:Wl}let L=M(e),E=L(e),q=e[1]&&An(e);return{c(){t=u("div"),n=u("div"),l=u("section");for(let X=0;X<C.length;X+=1)C[X].c();o=b(),r=u("div"),c=u("button"),a=J("Delete All"),f=b(),d=u("div"),_=b(),p=u("div"),h=u("form"),E.c(),k=b(),q&&q.c(),v=b(),g=u("div"),w=u("button"),w.textContent="Add new page",D=b(),y=u("button"),j=J("Delete last page"),i(l,"id","controls"),i(l,"class","controls-with-actions svelte-14dirsn"),i(c,"class","btn btn-sm btn-error"),c.disabled=m=e[2].length===0,B(r,"margin-top","1rem"),i(n,"class","column col-7"),i(d,"class","divider-vert col-1"),i(h,"class","form-horizontal"),i(w,"class","btn btn-sm"),i(y,"class","btn btn-sm btn-error"),y.disabled=z=e[2].length<=6,i(g,"class","btn-group"),i(p,"class","column col-4"),i(t,"class","columns")},m(X,Z){O(X,t,Z),s(t,n),s(n,l);for(let T=0;T<C.length;T+=1)C[T]&&C[T].m(l,null);s(n,o),s(n,r),s(r,c),s(c,a),s(t,f),s(t,d),s(t,_),s(t,p),s(p,h),E.m(h,null),s(h,k),q&&q.m(h,null),s(p,v),s(p,g),s(g,w),s(g,D),s(g,y),s(y,j),A||(P=[I(c,"click",e[14]),I(h,"submit",Zt(e[19])),I(w,"click",e[7]),I(y,"click",e[8])],A=!0)},p(X,Z){if(Z[0]&114213){U=fe(X[2]);let T;for(T=0;T<U.length;T+=1){const K=jn(X,U,T);C[T]?C[T].p(K,Z):(C[T]=Rn(K),C[T].c(),C[T].m(l,null))}for(;T<C.length;T+=1)C[T].d(1);C.length=U.length}Z[0]&4&&m!==(m=X[2].length===0)&&(c.disabled=m),L!==(L=M(X))&&(E.d(1),E=L(X),E&&(E.c(),E.m(h,k))),X[1]?q?q.p(X,Z):(q=An(X),q.c(),q.m(h,null)):q&&(q.d(1),q=null),Z[0]&4&&z!==(z=X[2].length<=6)&&(y.disabled=z)},i:ie,o:ie,d(X){X&&R(t),Ke(C,X),E.d(),q&&q.d(),A=!1,ke(P)}}}function Ql(e,t,n){let l,o,r,c;$e(e,x,T=>n(18,c=T));let a=null,m=null;const f=[en,yt,Mt];function d(T){n(0,a=T),n(1,m={...T})}function _(){if(!m||!a)return;const T=o.indexOf(a);if(T===-1)return;const K=[...o];K[T]={...m},x.updateInstrument({trackControls:K}),n(0,a=K[T]),n(1,m={...K[T]})}function p(){const T=[...o];for(let K=0;K<6;K++)T.push(_t());x.updateInstrument({trackControls:T})}function h(){if(o.length<=6||!confirm("Delete the last page of 6 controls? This cannot be undone."))return;const T=o.slice(0,-6);x.updateInstrument({trackControls:T})}function k(T){return T.option===en?" ":T.option===yt?T.continuousControl?`CC #${T.continuousControl.cc}`:"CC":T.option===Mt?"CTRL":"Unknown"}function v(T){return T.option===en?" ":T.option===yt?T.continuousControl?T.continuousControl.name:"":T.option===Mt?T.trackValue:"Unknown"}function g(T){if(!confirm("Delete this row of 6 controls? This cannot be undone."))return;const K=T*6,te=[...o.slice(0,K),...o.slice(K+6)];x.updateInstrument({trackControls:te}),n(0,a=null),n(1,m=null)}function w(T){const K=T*6,te=[...o];for(let V=0;V<6;V++)te.splice(K,0,_t());x.updateInstrument({trackControls:te})}function D(T){const K=(T+1)*6,te=[...o];for(let V=0;V<6;V++)te.splice(K,0,_t());x.updateInstrument({trackControls:te})}function y(){confirm("Delete all track controls? This cannot be undone.")&&(x.updateInstrument({trackControls:[]}),n(0,a=null),n(1,m=null))}function j(T){if(T===0)return;const K=T*6,te=(T-1)*6,V=[...o],Q=V.splice(K,6);V.splice(te,0,...Q),x.updateInstrument({trackControls:V})}function z(T){const K=Math.ceil(o.length/6);if(T>=K-1)return;const te=T*6,V=(T+1)*6,Q=[...o],G=Q.splice(V,6);Q.splice(te,0,...G),x.updateInstrument({trackControls:Q})}function A(T){Qt.call(this,e,T)}const P=T=>d(T),U=T=>j(Math.floor(T/6)),C=T=>z(Math.floor(T/6)),M=T=>w(Math.floor(T/6)),L=T=>D(Math.floor(T/6)),E=T=>g(Math.floor(T/6));function q(){m.option=St(this),n(1,m),n(4,f)}const X=T=>{const K=parseInt(T.target.value);n(1,m.continuousControl=r.find(te=>te.cc===K)||null,m),_()};function Z(){m.trackValue=St(this),n(1,m),n(4,f)}return e.$$.update=()=>{e.$$.dirty[0]&262144&&n(17,l=c.selectedInstrument),e.$$.dirty[0]&131072&&n(2,o=(l==null?void 0:l.trackControls)||[]),e.$$.dirty[0]&131072&&n(3,r=(l==null?void 0:l.continuousControls)||[])},[a,m,o,r,f,d,_,p,h,k,v,g,w,D,y,j,z,l,c,A,P,U,C,M,L,E,q,X,Z]}class $l extends ut{constructor(t){super(),ct(this,t,Ql,Zl,xe,{},null,[-1,-1])}}function Fn(e,t,n){const l=e.slice();return l[15]=t[n],l}function xl(e){let t;return{c(){t=u("tr"),t.innerHTML='<td colspan="3" style="text-align: center; padding: 2rem; color: #999; font-size: 0.85rem;">No row definitions yet. Click &quot;New Row Definition&quot; to add one.</td>',i(t,"class","svelte-1xkwmhp")},m(n,l){O(n,t,l)},p:ie,d(n){n&&R(t)}}}function eo(e){let t,n=fe(e[2]),l=[];for(let o=0;o<n.length;o+=1)l[o]=Vn(Fn(e,n,o));return{c(){for(let o=0;o<l.length;o+=1)l[o].c();t=ht()},m(o,r){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(o,r);O(o,t,r)},p(o,r){if(r&13){n=fe(o[2]);let c;for(c=0;c<n.length;c+=1){const a=Fn(o,n,c);l[c]?l[c].p(a,r):(l[c]=Vn(a),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length}},d(o){o&&R(t),Ke(l,o)}}}function to(e){let t;return{c(){t=u("span"),t.textContent="",B(t,"color","#999")},m(n,l){O(n,t,l)},d(n){n&&R(t)}}}function no(e){let t;return{c(){t=u("span"),t.textContent="",B(t,"color","#32b643"),B(t,"font-weight","600")},m(n,l){O(n,t,l)},d(n){n&&R(t)}}}function Vn(e){let t,n,l,o=e[15].name+"",r,c,a,m=(e[15].label||"")+"",f,d,_,p,h,k;function v(y,j){return y[15].show?no:to}let g=v(e),w=g(e);function D(){return e[10](e[15])}return{c(){t=u("tr"),n=u("td"),l=u("strong"),r=J(o),c=b(),a=u("td"),f=J(m),d=b(),_=u("td"),w.c(),p=b(),B(_,"text-align","center"),B(_,"font-size","0.8rem"),B(t,"cursor","pointer"),i(t,"class","svelte-1xkwmhp"),ae(t,"active",e[15]===e[0])},m(y,j){O(y,t,j),s(t,n),s(n,l),s(l,r),s(t,c),s(t,a),s(a,f),s(t,d),s(t,_),w.m(_,null),s(t,p),h||(k=I(t,"click",D),h=!0)},p(y,j){e=y,j&4&&o!==(o=e[15].name+"")&&be(r,o),j&4&&m!==(m=(e[15].label||"")+"")&&be(f,m),g!==(g=v(e))&&(w.d(1),w=g(e),w&&(w.c(),w.m(_,null))),j&5&&ae(t,"active",e[15]===e[0])},d(y){y&&R(t),w.d(),h=!1,k()}}}function lo(e){let t,n,l,o,r,c;return{c(){t=u("div"),n=u("button"),n.textContent="+ New Row Definition",l=b(),o=u("p"),o.innerHTML=`Row definitions organize and name the rows in your sequencer.<br/>
            Add rows for different instruments, patterns, or sequences.`,i(n,"class","btn btn-primary btn-lg svelte-1xkwmhp"),B(o,"font-size","0.75rem"),B(o,"color","#999"),B(o,"margin-top","1rem"),B(o,"line-height","1.4"),i(t,"class","empty-state svelte-1xkwmhp")},m(a,m){O(a,t,m),s(t,n),s(t,l),s(t,o),r||(c=I(n,"click",e[6]),r=!0)},p:ie,d(a){a&&R(t),r=!1,c()}}}function oo(e){let t,n,l=e[0]?"Edit":"New",o,r,c,a,m,f,d,_,p,h,k,v,g,w,D,y,j,z,A,P,U,C,M,L,E,q,X,Z,T,K,te,V,Q,G,de,F;function De(oe,le){return oe[0]?io:so}let Ee=De(e),ge=Ee(e);return{c(){t=u("form"),n=u("legend"),o=J(l),r=b(),c=u("div"),a=u("div"),a.innerHTML='<label class="form-label" for="row-def-name">Name</label>',m=b(),f=u("div"),d=u("input"),_=b(),p=u("small"),p.textContent="Row identifier (max 12 chars)",h=b(),k=u("div"),v=u("div"),v.innerHTML='<label class="form-label" for="row-def-label">Label</label>',g=b(),w=u("div"),D=u("input"),y=b(),j=u("small"),j.textContent="Display label for this row",z=b(),A=u("div"),P=u("div"),P.innerHTML='<label class="form-label">Display</label>',U=b(),C=u("div"),M=u("label"),L=u("input"),E=b(),q=u("i"),X=J(" Show this row in sequence"),Z=b(),T=u("small"),T.textContent="Toggle visibility in the sequencer display",K=b(),te=u("div"),V=u("div"),Q=b(),G=u("div"),ge.c(),i(a,"class","col-3"),i(d,"id","row-def-name"),i(d,"class","form-input"),i(d,"type","search"),i(d,"maxlength","12"),i(d,"placeholder","e.g., Bass, Melody, Drums"),B(p,"color","#999"),B(p,"display","block"),B(p,"margin-top","0.2rem"),i(f,"class","col-9"),i(c,"class","form-group"),i(v,"class","col-3"),i(D,"id","row-def-label"),i(D,"class","form-input"),i(D,"type","search"),i(D,"maxlength","16"),i(D,"placeholder","Short description"),B(j,"color","#999"),B(j,"display","block"),B(j,"margin-top","0.2rem"),i(w,"class","col-9"),i(k,"class","form-group"),i(P,"class","col-3"),i(L,"type","checkbox"),i(q,"class","form-icon"),i(M,"class","form-switch svelte-1xkwmhp"),B(T,"color","#999"),B(T,"display","block"),B(T,"margin-top","0.2rem"),i(C,"class","col-9"),i(A,"class","form-group"),i(V,"class","col-3"),i(G,"class","col-9"),i(te,"class","form-group"),i(t,"class","form-horizontal")},m(oe,le){O(oe,t,le),s(t,n),s(n,o),s(t,r),s(t,c),s(c,a),s(c,m),s(c,f),s(f,d),ne(d,e[1].name),s(f,_),s(f,p),s(t,h),s(t,k),s(k,v),s(k,g),s(k,w),s(w,D),ne(D,e[1].label),s(w,y),s(w,j),s(t,z),s(t,A),s(A,P),s(A,U),s(A,C),s(C,M),s(M,L),L.checked=e[1].show,s(M,E),s(M,q),s(M,X),s(C,Z),s(C,T),s(t,K),s(t,te),s(te,V),s(te,Q),s(te,G),ge.m(G,null),de||(F=[I(d,"input",e[11]),I(D,"input",e[12]),I(L,"change",e[13]),I(t,"submit",Zt(e[9]))],de=!0)},p(oe,le){le&1&&l!==(l=oe[0]?"Edit":"New")&&be(o,l),le&2&&d.value!==oe[1].name&&ne(d,oe[1].name),le&2&&D.value!==oe[1].label&&ne(D,oe[1].label),le&2&&(L.checked=oe[1].show),Ee===(Ee=De(oe))&&ge?ge.p(oe,le):(ge.d(1),ge=Ee(oe),ge&&(ge.c(),ge.m(G,null)))},d(oe){oe&&R(t),ge.d(),de=!1,ke(F)}}}function so(e){let t,n,l;return{c(){t=u("button"),t.textContent="Add Row",i(t,"type","button"),i(t,"class","btn btn-sm btn-primary tooltip"),i(t,"data-tooltip","Add this row definition.")},m(o,r){O(o,t,r),n||(l=I(t,"click",e[4]),n=!0)},p:ie,d(o){o&&R(t),n=!1,l()}}}function io(e){let t,n,l,o,r;return{c(){t=u("button"),t.textContent="Delete",n=b(),l=u("button"),l.textContent="Cancel",i(t,"type","button"),i(t,"class","btn btn-sm tooltip"),i(t,"data-tooltip","Delete this row definition."),i(l,"type","button"),i(l,"class","btn btn-sm"),B(l,"margin-left","0.5rem")},m(c,a){O(c,t,a),O(c,n,a),O(c,l,a),o||(r=[I(t,"click",e[5]),I(l,"click",e[14])],o=!0)},p:ie,d(c){c&&(R(t),R(n),R(l)),o=!1,ke(r)}}}function ro(e){let t,n,l,o,r,c,a,m,f,d,_,p=e[2].length+"",h,k,v=e[2].length!==1?"s":"",g,w,D,y,j;function z(L,E){return L[2].length>0?eo:xl}let A=z(e),P=A(e);function U(L,E){return L[1]?oo:lo}let C=U(e),M=C(e);return{c(){t=u("div"),n=u("div"),l=u("table"),o=u("thead"),o.innerHTML='<tr class="svelte-1xkwmhp"><th>Name</th> <th>Label</th> <th style="width: 60px;">Visible</th></tr>',r=b(),c=u("tbody"),P.c(),a=b(),m=u("tfoot"),f=u("tr"),d=u("td"),_=u("span"),h=J(p),k=J(` 
              Row Definition`),g=J(v),w=b(),D=u("div"),y=b(),j=u("div"),M.c(),i(_,"class","text-primary"),B(_,"font-weight","600"),i(d,"colspan","3"),i(f,"class","svelte-1xkwmhp"),i(l,"class","table table-striped table-hover tablescroll svelte-1xkwmhp"),i(n,"class","column col-7"),i(D,"class","divider-vert col-1"),i(j,"class","column col-4"),i(t,"class","columns col-oneline")},m(L,E){O(L,t,E),s(t,n),s(n,l),s(l,o),s(l,r),s(l,c),P.m(c,null),s(l,a),s(l,m),s(m,f),s(f,d),s(d,_),s(_,h),s(d,k),s(d,g),s(t,w),s(t,D),s(t,y),s(t,j),M.m(j,null)},p(L,[E]){A===(A=z(L))&&P?P.p(L,E):(P.d(1),P=A(L),P&&(P.c(),P.m(c,null))),E&4&&p!==(p=L[2].length+"")&&be(h,p),E&4&&v!==(v=L[2].length!==1?"s":"")&&be(g,v),C===(C=U(L))&&M?M.p(L,E):(M.d(1),M=C(L),M&&(M.c(),M.m(j,null)))},i:ie,o:ie,d(L){L&&R(t),P.d(),M.d()}}}function co(e,t,n){let l,o,r;$e(e,x,D=>n(8,r=D));let c=null,a=null;function m(D){n(0,c=D),n(1,a={...D})}function f(){if(a)if(c){const D=o.indexOf(c),y=[...o];y[D]={...a},x.updateInstrument({rowDefinitions:y}),n(0,c=y[D]),n(1,a={...y[D]})}else{const D=[...o,{...a}];x.updateInstrument({rowDefinitions:D}),n(0,c=null),n(1,a=null)}}function d(){if(!c)return;const D=o.filter(y=>y!==c);x.updateInstrument({rowDefinitions:D}),n(0,c=null),n(1,a=null)}function _(){n(0,c=null),n(1,a=xn())}function p(D){Qt.call(this,e,D)}const h=D=>m(D);function k(){a.name=this.value,n(1,a)}function v(){a.label=this.value,n(1,a)}function g(){a.show=this.checked,n(1,a)}const w=()=>{n(0,c=null),n(1,a=null)};return e.$$.update=()=>{e.$$.dirty&256&&n(7,l=r.selectedInstrument),e.$$.dirty&128&&n(2,o=(l==null?void 0:l.rowDefinitions)||[]),e.$$.dirty&3&&a&&c&&f()},[c,a,o,m,f,d,_,l,r,p,h,k,v,g,w]}class uo extends ut{constructor(t){super(),ct(this,t,co,ro,xe,{})}}function Bn(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g,w,D,y,j,z,A,P,U,C,M,L,E,q,X,Z;const T=[po,mo,fo,ao],K=[];function te(V,Q){return V[0]==="settings"?0:V[0]==="cc"?1:V[0]==="trackControl"?2:V[0]==="rowDefs"?3:-1}return~(M=te(e))&&(L=K[M]=T[M](e)),q=sl(e[3][0]),{c(){var V,Q,G;t=u("div"),n=u("input"),l=b(),o=u("input"),r=b(),c=u("input"),a=b(),m=u("input"),f=b(),d=u("ul"),_=u("li"),_.innerHTML='<label for="instrumentSettings"><i class="icon icon-menu"></i> Settings</label>',p=b(),h=u("li"),k=u("label"),k.innerHTML='<i class="icon icon-bookmark"></i> Midi CC&#39;s',g=b(),w=u("li"),D=u("label"),D.innerHTML='<i class="icon icon-arrow-right"></i> Track Control',j=b(),z=u("li"),A=u("label"),A.innerHTML='<i class="icon icon-resize-vert"></i> Row Definitions',U=b(),C=u("div"),L&&L.c(),i(n,"type","radio"),i(n,"id","instrumentSettings"),i(n,"name","tabs"),i(n,"class","tab-locator"),n.hidden=!0,n.__value="settings",ne(n,n.__value),i(o,"type","radio"),i(o,"id","instrumentCC"),i(o,"name","tabs"),i(o,"class","tab-locator"),o.hidden=!0,o.__value="cc",ne(o,o.__value),i(c,"type","radio"),i(c,"id","instrumentTrackControl"),i(c,"name","tabs"),i(c,"class","tab-locator"),c.hidden=!0,c.__value="trackControl",ne(c,c.__value),i(m,"type","radio"),i(m,"id","instrumentRowDefs"),i(m,"name","tabs"),i(m,"class","tab-locator"),m.hidden=!0,m.__value="rowDefs",ne(m,m.__value),i(_,"class","tab-item"),ae(_,"active",e[0]==="settings"),i(k,"for","instrumentCC"),i(h,"class","tab-item badge"),i(h,"data-badge",v=((V=e[1].selectedInstrument.continuousControls)==null?void 0:V.length)||0),ae(h,"active",e[0]==="cc"),i(D,"for","instrumentTrackControl"),i(w,"class","tab-item badge"),i(w,"data-badge",y=((Q=e[1].selectedInstrument.trackControls)==null?void 0:Q.length)||0),ae(w,"active",e[0]==="trackControl"),i(A,"for","instrumentRowDefs"),i(z,"class","tab-item badge"),i(z,"data-badge",P=((G=e[1].selectedInstrument.rowDefinitions)==null?void 0:G.length)||0),ae(z,"active",e[0]==="rowDefs"),i(d,"class","tab tab-block tabs-container"),i(C,"class","tabs"),q.p(n,o,c,m)},m(V,Q){O(V,t,Q),s(t,n),n.checked=n.__value===e[0],s(t,l),s(t,o),o.checked=o.__value===e[0],s(t,r),s(t,c),c.checked=c.__value===e[0],s(t,a),s(t,m),m.checked=m.__value===e[0],s(t,f),s(t,d),s(d,_),s(d,p),s(d,h),s(h,k),s(d,g),s(d,w),s(w,D),s(d,j),s(d,z),s(z,A),s(t,U),s(t,C),~M&&K[M].m(C,null),E=!0,X||(Z=[I(n,"change",e[2]),I(o,"change",e[4]),I(c,"change",e[5]),I(m,"change",e[6])],X=!0)},p(V,Q){var de,F,De;Q&1&&(n.checked=n.__value===V[0]),Q&1&&(o.checked=o.__value===V[0]),Q&1&&(c.checked=c.__value===V[0]),Q&1&&(m.checked=m.__value===V[0]),(!E||Q&1)&&ae(_,"active",V[0]==="settings"),(!E||Q&2&&v!==(v=((de=V[1].selectedInstrument.continuousControls)==null?void 0:de.length)||0))&&i(h,"data-badge",v),(!E||Q&1)&&ae(h,"active",V[0]==="cc"),(!E||Q&2&&y!==(y=((F=V[1].selectedInstrument.trackControls)==null?void 0:F.length)||0))&&i(w,"data-badge",y),(!E||Q&1)&&ae(w,"active",V[0]==="trackControl"),(!E||Q&2&&P!==(P=((De=V[1].selectedInstrument.rowDefinitions)==null?void 0:De.length)||0))&&i(z,"data-badge",P),(!E||Q&1)&&ae(z,"active",V[0]==="rowDefs");let G=M;M=te(V),M!==G&&(L&&(Wt(),He(K[G],1,1,()=>{K[G]=null}),Xt()),~M?(L=K[M],L||(L=K[M]=T[M](V),L.c()),Te(L,1),L.m(C,null)):L=null)},i(V){E||(Te(L),E=!0)},o(V){He(L),E=!1},d(V){V&&R(t),~M&&K[M].d(),q.r(),X=!1,ke(Z)}}}function ao(e){let t,n;return t=new uo({}),{c(){ft(t.$$.fragment)},m(l,o){it(t,l,o),n=!0},i(l){n||(Te(t.$$.fragment,l),n=!0)},o(l){He(t.$$.fragment,l),n=!1},d(l){rt(t,l)}}}function fo(e){let t,n;return t=new $l({}),{c(){ft(t.$$.fragment)},m(l,o){it(t,l,o),n=!0},i(l){n||(Te(t.$$.fragment,l),n=!0)},o(l){He(t.$$.fragment,l),n=!1},d(l){rt(t,l)}}}function mo(e){let t,n;return t=new ql({}),{c(){ft(t.$$.fragment)},m(l,o){it(t,l,o),n=!0},i(l){n||(Te(t.$$.fragment,l),n=!0)},o(l){He(t.$$.fragment,l),n=!1},d(l){rt(t,l)}}}function po(e){let t,n;return t=new Fl({}),{c(){ft(t.$$.fragment)},m(l,o){it(t,l,o),n=!0},i(l){n||(Te(t.$$.fragment,l),n=!0)},o(l){He(t.$$.fragment,l),n=!1},d(l){rt(t,l)}}}function _o(e){let t,n,l=e[1].selectedInstrument&&Bn(e);return{c(){l&&l.c(),t=ht()},m(o,r){l&&l.m(o,r),O(o,t,r),n=!0},p(o,[r]){o[1].selectedInstrument?l?(l.p(o,r),r&2&&Te(l,1)):(l=Bn(o),l.c(),Te(l,1),l.m(t.parentNode,t)):l&&(Wt(),He(l,1,1,()=>{l=null}),Xt())},i(o){n||(Te(l),n=!0)},o(o){He(l),n=!1},d(o){o&&R(t),l&&l.d(o)}}}function ho(e,t,n){let l;$e(e,x,d=>n(1,l=d));let o="settings";const r=[[]];function c(){o=this.__value,n(0,o)}function a(){o=this.__value,n(0,o)}function m(){o=this.__value,n(0,o)}function f(){o=this.__value,n(0,o)}return[o,l,c,r,a,m,f]}class bo extends ut{constructor(t){super(),ct(this,t,ho,_o,xe,{})}}function Un(e,t,n){const l=e.slice();return l[13]=t[n],l[15]=n,l}function go(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g,w,D;return{c(){t=u("div"),n=u("button"),l=b(),o=u("div"),r=u("div"),r.innerHTML='<div class="modal-title h6" style="font-size: 0.8rem;">Import Instrument</div>',c=b(),a=u("div"),a.innerHTML='<div class="content"><p style="font-size: 0.75rem;">How would you like to import this instrument?</p></div>',m=b(),f=u("div"),d=u("button"),d.textContent="As New Instrument",_=b(),p=u("button"),h=J("Merge with Current"),v=b(),g=u("button"),g.textContent="Cancel",i(n,"class","modal-overlay"),i(n,"aria-label","Close modal"),i(n,"type","button"),i(r,"class","modal-header"),i(a,"class","modal-body"),i(d,"class","btn btn-sm svelte-uz7jv"),B(d,"font-size","0.75rem"),i(p,"class","btn btn-sm svelte-uz7jv"),p.disabled=k=!e[3].selectedInstrument,B(p,"font-size","0.75rem"),i(g,"class","btn btn-sm svelte-uz7jv"),B(g,"font-size","0.75rem"),i(f,"class","modal-footer svelte-uz7jv"),i(o,"class","modal-container svelte-uz7jv"),i(o,"role","document"),i(t,"class","modal modal-sm active svelte-uz7jv"),i(t,"id","importInstrumentSelection")},m(y,j){O(y,t,j),s(t,n),s(t,l),s(t,o),s(o,r),s(o,c),s(o,a),s(o,m),s(o,f),s(f,d),s(f,_),s(f,p),s(p,h),s(f,v),s(f,g),w||(D=[I(n,"click",e[7]),I(n,"keydown",e[10]),I(d,"click",e[11]),I(p,"click",e[12]),I(g,"click",e[7])],w=!0)},p(y,j){j&8&&k!==(k=!y[3].selectedInstrument)&&(p.disabled=k)},d(y){y&&R(t),w=!1,ke(D)}}}function vo(e){let t,n,l,o,r,c,a,m,f,d,_,p,h,k,v,g,w=e[1]!==1?"s":"",D,y,j,z,A,P,U=fe(e[0].instruments),C=[];for(let M=0;M<U.length;M+=1)C[M]=Kn(Un(e,U,M));return{c(){t=u("div"),n=u("button"),l=b(),o=u("div"),r=u("div"),r.innerHTML='<div class="modal-title h6" style="font-size: 0.8rem;">Select Instruments to Import</div>',c=b(),a=u("div"),m=u("div"),f=u("p"),f.textContent="Select which instruments to import:",d=b();for(let M=0;M<C.length;M+=1)C[M].c();_=b(),p=u("div"),h=u("button"),k=J("Import "),v=J(e[1]),g=J(" Instrument"),D=J(w),j=b(),z=u("button"),z.textContent="Cancel",i(n,"class","modal-overlay"),i(n,"aria-label","Close modal"),i(n,"type","button"),i(r,"class","modal-header"),B(f,"font-size","0.75rem"),B(f,"margin-bottom","0.5rem"),i(m,"class","content"),B(m,"max-height","300px"),B(m,"overflow-y","auto"),i(a,"class","modal-body"),i(h,"class","btn btn-sm btn-primary svelte-uz7jv"),h.disabled=y=e[1]===0,B(h,"font-size","0.75rem"),i(z,"class","btn btn-sm svelte-uz7jv"),B(z,"font-size","0.75rem"),i(p,"class","modal-footer svelte-uz7jv"),i(o,"class","modal-container svelte-uz7jv"),i(o,"role","document"),i(t,"class","modal modal-sm active svelte-uz7jv"),i(t,"id","importInstrumentSelection")},m(M,L){O(M,t,L),s(t,n),s(t,l),s(t,o),s(o,r),s(o,c),s(o,a),s(a,m),s(m,f),s(m,d);for(let E=0;E<C.length;E+=1)C[E]&&C[E].m(m,null);s(o,_),s(o,p),s(p,h),s(h,k),s(h,v),s(h,g),s(h,D),s(p,j),s(p,z),A||(P=[I(n,"click",e[7]),I(n,"keydown",e[8]),I(h,"click",e[5]),I(z,"click",e[7])],A=!0)},p(M,L){if(L&65){U=fe(M[0].instruments);let E;for(E=0;E<U.length;E+=1){const q=Un(M,U,E);C[E]?C[E].p(q,L):(C[E]=Kn(q),C[E].c(),C[E].m(m,null))}for(;E<C.length;E+=1)C[E].d(1);C.length=U.length}L&2&&be(v,M[1]),L&2&&w!==(w=M[1]!==1?"s":"")&&be(D,w),L&2&&y!==(y=M[1]===0)&&(h.disabled=y)},d(M){M&&R(t),Ke(C,M),A=!1,ke(P)}}}function Kn(e){let t,n,l,o,r,c,a=e[13].name+"",m,f,d,_;function p(){return e[9](e[15])}return{c(){t=u("label"),n=u("input"),o=b(),r=u("i"),c=b(),m=J(a),f=b(),i(n,"type","checkbox"),n.checked=l=e[13].selected,i(r,"class","form-icon"),i(t,"class","form-checkbox"),B(t,"display","block"),B(t,"margin-bottom","0.3rem"),B(t,"font-size","0.75rem")},m(h,k){O(h,t,k),s(t,n),s(t,o),s(t,r),s(t,c),s(t,m),s(t,f),d||(_=I(n,"change",p),d=!0)},p(h,k){e=h,k&1&&l!==(l=e[13].selected)&&(n.checked=l),k&1&&a!==(a=e[13].name+"")&&be(m,a)},d(h){h&&R(t),d=!1,_()}}}function ko(e){let t;function n(r,c){return r[2]?vo:go}let l=n(e),o=l(e);return{c(){o.c(),t=ht()},m(r,c){o.m(r,c),O(r,t,c)},p(r,[c]){l===(l=n(r))&&o?o.p(r,c):(o.d(1),o=l(r),o&&(o.c(),o.m(t.parentNode,t)))},i:ie,o:ie,d(r){r&&R(t),o.d(r)}}}function Co(e,t,n){let l,o,r,c;$e(e,Bt,g=>n(0,r=g)),$e(e,x,g=>n(3,c=g));function a(g){if(!c.importInstrumentData)return;const w=Nl(c.importInstrumentData,g);w&&(g==="new"?x.addInstrument(w):g==="merge"&&x.updateInstrument({continuousControls:w.continuousControls,rowDefinitions:w.rowDefinitions})),x.clearImportData(),Rt.set(!1)}function m(){r&&(Ll(r.instruments),Bt.set(null),Rt.set(!1))}function f(g){Bt.update(w=>(w&&(w.instruments[g].selected=!w.instruments[g].selected),w))}function d(){x.clearImportData(),Bt.set(null),Rt.set(!1)}const _=g=>g.key==="Enter"&&d(),p=g=>f(g),h=g=>g.key==="Enter"&&d(),k=()=>a("new"),v=()=>a("merge");return e.$$.update=()=>{e.$$.dirty&1&&n(2,l=r&&r.instruments.length>1),e.$$.dirty&1&&n(1,o=r?r.instruments.filter(g=>g.selected).length:0)},[r,o,l,c,a,m,f,d,_,p,h,k,v]}class wo extends ut{constructor(t){super(),ct(this,t,Co,ko,xe,{})}}function Io(e){let t;return{c(){t=u("footer"),t.innerHTML='<span class="footer-text svelte-15361xw">Redesigned and optimised by <strong class="svelte-15361xw">A7K8 - Michael Bennett</strong></span>',i(t,"class","app-footer svelte-15361xw")},m(n,l){O(n,t,l)},p:ie,i:ie,o:ie,d(n){n&&R(t)}}}class yo extends ut{constructor(t){super(),ct(this,t,null,Io,xe,{})}}function qn(e){let t,n;return t=new bo({}),{c(){ft(t.$$.fragment)},m(l,o){it(t,l,o),n=!0},i(l){n||(Te(t.$$.fragment,l),n=!0)},o(l){He(t.$$.fragment,l),n=!1},d(l){rt(t,l)}}}function Gn(e){let t,n;return t=new wo({}),{c(){ft(t.$$.fragment)},m(l,o){it(t,l,o),n=!0},i(l){n||(Te(t.$$.fragment,l),n=!0)},o(l){He(t.$$.fragment,l),n=!1},d(l){rt(t,l)}}}function Mo(e){let t,n,l,o,r,c,a,m,f;t=new Il({}),l=new jl({});let d=e[0].selectedInstrument&&qn(),_=e[1]&&Gn();return m=new yo({}),{c(){ft(t.$$.fragment),n=b(),ft(l.$$.fragment),o=b(),r=u("main"),d&&d.c(),c=b(),_&&_.c(),a=b(),ft(m.$$.fragment)},m(p,h){it(t,p,h),O(p,n,h),it(l,p,h),O(p,o,h),O(p,r,h),d&&d.m(r,null),s(r,c),_&&_.m(r,null),O(p,a,h),it(m,p,h),f=!0},p(p,[h]){p[0].selectedInstrument?d?h&1&&Te(d,1):(d=qn(),d.c(),Te(d,1),d.m(r,c)):d&&(Wt(),He(d,1,1,()=>{d=null}),Xt()),p[1]?_?h&2&&Te(_,1):(_=Gn(),_.c(),Te(_,1),_.m(r,null)):_&&(Wt(),He(_,1,1,()=>{_=null}),Xt())},i(p){f||(Te(t.$$.fragment,p),Te(l.$$.fragment,p),Te(d),Te(_),Te(m.$$.fragment,p),f=!0)},o(p){He(t.$$.fragment,p),He(l.$$.fragment,p),He(d),He(_),He(m.$$.fragment,p),f=!1},d(p){p&&(R(n),R(o),R(r),R(a)),rt(t,p),rt(l,p),d&&d.d(),_&&_.d(),rt(m,p)}}}function To(e,t,n){let l,o;return $e(e,x,r=>n(0,l=r)),$e(e,Rt,r=>n(1,o=r)),[l,o]}class Do extends ut{constructor(t){super(),ct(this,t,To,Mo,xe,{})}}new Do({target:document.getElementById("app")});
